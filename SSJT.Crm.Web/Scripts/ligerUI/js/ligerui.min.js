if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetAccordionManager=function(){return LigerUIManagers[this[0].id+"_Accordion"]};A.fn.ligerRemoveAccordionManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Accordion"]=null})};A.fn.ligerAccordion=function(B){return this.each(function(){B=A.extend({height:null,speed:"normal",changeHeightOnResize:false,heightDiff:0},B||{});if(this.usedAccordion){return}var D={onResize:function(){if(!B.height||typeof(B.height)!="string"||B.height.indexOf("%")==-1){return false}if(D.accordion.parent()[0].tagName.toLowerCase()=="body"){var E=A(window).height();E-=parseInt(D.layout.parent().css("paddingTop"));E-=parseInt(D.layout.parent().css("paddingBottom"));D.height=B.heightDiff+E*parseFloat(D.height)*0.01}else{D.height=B.heightDiff+(D.accordion.parent().height()*parseFloat(B.height)*0.01)}D.accordion.height(D.height);D.setContentHeight(D.height-D.headerHoldHeight)},setHeight:function(E){D.accordion.height(E);E-=D.headerHoldHeight;A("> .l-accordion-content",D.accordion).height(E)}};D.accordion=A(this);if(!D.accordion.hasClass("l-accordion-panel")){D.accordion.addClass("l-accordion-panel")}var C=0;if(A("> div[lselected=true]",D.accordion).length>0){C=A("> div",D.accordion).index(A("> div[lselected=true]",D.accordion))}A("> div",D.accordion).each(function(F,E){var G=A('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');if(F==C){A(".l-accordion-toggle",G).addClass("l-accordion-toggle-open")}if(A(E).attr("title")){A(".l-accordion-header-inner",G).html(A(E).attr("title"));A(E).attr("title","")}A(E).before(G);if(!A(E).hasClass("l-accordion-content")){A(E).addClass("l-accordion-content")}});A(".l-accordion-toggle",D.accordion).each(function(){if(!A(this).hasClass("l-accordion-toggle-open")&&!A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close")}if(A(this).hasClass("l-accordion-toggle-close")){A(this).parent().next(".l-accordion-content:visible").hide()}});A(".l-accordion-header",D.accordion).hover(function(){A(this).addClass("l-accordion-header-over")},function(){A(this).removeClass("l-accordion-header-over")});A(".l-accordion-toggle",D.accordion).hover(function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).addClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close-over")}}},function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).removeClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).removeClass("l-accordion-toggle-close-over")}}}).click(function(){if(A(this).hasClass("l-accordion-toggle-close")){A(this).removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over");A(this).addClass("l-accordion-toggle-open");A(this).parent().next(".l-accordion-content").show(B.speed).siblings(".l-accordion-content:visible").hide(B.speed);A(this).parent().siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")}else{A(this).removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close");A(this).parent().next(".l-accordion-content").hide(B.speed)}});D.headerHoldHeight=0;A("> .l-accordion-header",D.accordion).each(function(){D.headerHoldHeight+=A(this).height()});if(B.height&&typeof(B.height)=="string"&&B.height.indexOf("%")>0){D.onResize();if(B.changeHeightOnResize){A(window).resize(function(){D.onResize()})}}else{if(B.height){D.height=B.heightDiff+B.height;D.accordion.height(D.height);D.setHeight(B.height)}else{D.header=D.accordion.height()}}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Accordion"]=D;this.usedAccordion=true})}})(jQuery);(function(A){A.fn.ligerCheckBox=function(B){B=B||{};return this.each(function(){if(this.usedCheckBox){return}if(A(this).hasClass("l-hidden")){return}var C={};C.input=A(this);C.link=A('<a class="l-checkbox"></a>');C.wrapper=C.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent();C.wrapper.prepend(C.link);if(B.css){C.wrapper.css(B.css)}C.input.change(function(){if(this.checked){C.link.addClass("l-checkbox-checked")}else{C.link.removeClass("l-checkbox-checked")}return true});C.link.click(function(){if(C.input.attr("disabled")){return false}if(B.onBeforeClick){if(!B.onBeforeClick(C.input[0])){return false}}C.input.trigger("click").trigger("change");return false});C.wrapper.hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});this.checked&&C.link.addClass("l-checkbox-checked");this.usedCheckBox=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetComboBoxManager=function(){return LigerUIManagers[this[0].id+"_ComboBox"]};A.fn.ligerRemoveComboBoxManager=function(){return this.each(function(){LigerUIManagers[this.id+"_ComboBox"]=null})};A.fn.ligerComboBox=function(B){B=B||{};B=A.extend({resize:true,isMultiSelect:false,isShowCheckBox:false,columns:false,selectBoxWidth:false,selectBoxHeight:false,onBeforeSelect:false,onSelected:false,initValue:null,initText:null,valueField:"id",textField:"text",valueFieldID:null,split:";"},B);if(B.columns){B.isShowCheckBox=true}if(B.isMultiSelect){B.isShowCheckBox=true}return this.each(function(){if(this.usedComboBox){return}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}var E={findTextByValue:function(F){if(F==undefined){return""}var G="";A(B.data).each(function(I,J){var K=J[B.valueField];var H=J[B.textField];if(F==K){G+=H+B.split}});if(G.length>0){G=G.substr(0,G.length-1)}return G},findValueByText:function(G){if(!G&&G==""){return""}var F="";A(B.data).each(function(I,J){var K=J[B.valueField];var H=J[B.textField];if(G==H){F+=K+B.split}});if(F.length>0){F=F.substr(0,F.length-1)}return F},bulidContent:function(){this.clearContent();if(E.select){this.setSelect()}else{if(B.data){this.setData(B.data)}}},clearContent:function(){A("table",E.selectBox).html("");E.inputText.val("");E.valueField.val("")},setSelect:function(){this.clearContent();A("option",E.select).each(function(G){var H=A(this).val();var F=A(this).html();A("table.l-table-nocheckbox",E.selectBox).append("<tr><td index='"+G+"' value='"+H+"'>"+F+"</td>")});A("td:eq("+E.select[0].selectedIndex+")",E.selectBox).each(function(){if(A(this).hasClass("l-selected")){E.selectBox.hide();return}A(".l-selected",E.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(E.select[0].selectedIndex!=A(this).attr("index")&&E.select[0].onchange){E.select[0].selectedIndex=A(this).attr("index");E.select[0].onchange()}var F=parseInt(A(this).attr("index"));E.select[0].selectedIndex=F;E.select.trigger("change");E.selectBox.hide();E.inputText.val(A(this).html())});D.addClickEven()},setData:function(L){this.clearContent();if(B.columns){E.selectBox.table.headrow=A("<tr class='l-table-headerow'><td width='18px'></td></tr>");E.selectBox.table.append(E.selectBox.table.headrow);E.selectBox.table.addClass("l-box-select-grid");for(var J=0;J<B.columns.length;J++){var I=A("<td columnindex='"+J+"' columnname='"+B.columns[J].name+"'>"+B.columns[J].header+"</td>");if(B.columns[J].width){I.width(B.columns[J].width)}E.selectBox.table.headrow.append(I)}}for(var F=0;F<L.length;F++){var K=L[F][B.valueField];var G=L[F][B.textField];if(!B.columns){A("table.l-table-checkbox",E.selectBox).append("<tr><td style='width:18px;'  index='"+F+"' value='"+K+"' text='"+G+"' ><input type='checkbox' /></td><td index='"+F+"' value='"+K+"' align='left'>"+G+"</td>");A("table.l-table-nocheckbox",E.selectBox).append("<tr><td index='"+F+"' value='"+K+"' align='left'>"+G+"</td>")}else{var H=A("<tr><td style='width:18px;'  index='"+F+"' value='"+K+"' text='"+G+"' ><input type='checkbox' /></td></tr>");A("td",E.selectBox.table.headrow).each(function(){var N=A(this).attr("columnname");if(N){var M=A("<td>"+L[F][N]+"</td>");H.append(M)}});E.selectBox.table.append(H)}}if(B.isShowCheckBox&&A.fn.ligerCheckBox){A("table input:checkbox",E.selectBox).ligerCheckBox()}A(".l-table-checkbox input:checkbox",E.selectBox).change(function(){if(this.checked&&B.onBeforeSelect){var M=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){M=A(this).parent().parent()}else{M=A(this).parent()}if(M!=null&&!B.onBeforeSelect(M.attr("value"),M.attr("text"))){E.selectBox.slideToggle("fast");return false}}if(!B.isMultiSelect){if(this.checked){A("input:checked",E.selectBox).not(this).each(function(){this.checked=false;A(".l-checkbox-checked",A(this).parent()).removeClass("l-checkbox-checked")});E.selectBox.slideToggle("fast")}}D.changeValue()});D.addClickEven()},inputText:null,select:null,textFieldID:"",valueFieldID:"",valueField:null};var D={init:function(){var F=null;if(B.initValue!=undefined){F=B.initValue;var G=E.findTextByValue(F);E.inputText.val(G);E.valueField.val(F);D.onChangedValue(F,G)}else{if(B.initText!=undefined){F=E.findValueByText(B.initText);E.inputText.val(B.initText);E.valueField.val(F);D.onChangedValue(F,B.initText)}}if(!B.isShowCheckBox&&F!=null){A("table tr",E.selectBox).find("td:first").each(function(){if(F==A(this).attr("value")){A(this).addClass("l-selected")}})}if(B.isShowCheckBox&&F!=null){A(":checkbox",E.selectBox).each(function(){var I=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){I=A(this).parent().parent()}else{I=A(this).parent()}if(I==null){return}var H=F.toString().split(B.split);A(H).each(function(J,K){if(K==I.attr("value")){A(".l-checkbox",I).addClass("l-checkbox-checked")}})})}},onChangedValue:function(G,F){E.selectedText=F;E.selectedValue=G;if(B.onSelected){B.onSelected(G,F)}},changeValue:function(){var G="";var F="";A("input:checked",E.selectBox).each(function(){var H=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){H=A(this).parent().parent()}else{H=A(this).parent()}if(!H){return}G+=H.attr("value")+B.split;F+=H.attr("text")+B.split});if(G.length>0){G=G.substr(0,G.length-1)}if(F.length>0){F=F.substr(0,F.length-1)}E.valueField.val(G);E.inputText.val(F);D.onChangedValue(G,F)},addClickEven:function(){A(".l-table-nocheckbox td",E.selectBox).click(function(){if(B.onBeforeSelect&&!B.onBeforeSelect(A(this).attr("value"),A(this).html())){E.selectBox.slideToggle("fast");return false}if(A(this).hasClass("l-selected")){E.selectBox.slideToggle("fast");return}A(".l-selected",E.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(E.select){if(E.select[0].selectedIndex!=A(this).attr("index")){var F=parseInt(A(this).attr("index"));E.select[0].selectedIndex=F;E.select.trigger("change")}}E.boxToggling=true;E.selectBox.hide("fast",function(){E.boxToggling=false});E.inputText.val(A(this).html());E.valueField.val(A(this).attr("value"));D.onChangedValue(A(this).attr("value"),A(this).html())})},toggleSelectBox:function(G){var F=E.wrapper.height();E.boxToggling=true;if(G){E.selectBox.hide("fast",function(){E.boxToggling=false})}else{if(E.wrapper.offset().top+E.selectBox.height()+F+4-A(window).scrollTop()>A(window).height()){E.selectBox.css("marginTop",-1*(E.selectBox.height()+F+5))}E.selectBox.show("fast",function(){E.boxToggling=false;if(!B.isShowCheckBox){var H=(A("td.l-selected",E.selectBox).offset().top-E.selectBox.offset().top);A(".l-box-select-inner",E.selectBox).animate({scrollTop:H})}})}E.isShowed=E.selectBox.is(":visible")}};if(this.tagName.toLowerCase()=="input"){this.readOnly=true;E.inputText=A(this);E.textFieldID=this.id}else{if(this.tagName.toLowerCase()=="select"){A(this).addClass("l-hidden");E.select=A(this);B.isMultiSelect=false;B.isShowCheckBox=false;E.textFieldID=this.id+"_txt";E.inputText=A('<input type="text" readonly="true"/>');E.inputText.attr("id",E.textFieldID).insertAfter(A(this))}else{return}}if(E.inputText[0].name==undefined){E.inputText[0].name=E.textFieldID}E.valueField=null;if(B.valueFieldID){E.valueField=A("#"+B.valueFieldID+":input");if(E.valueField.length==0){E.valueField=A('<input type="hidden"/>')}E.valueField[0].id=E.valueField[0].name=B.valueFieldID}else{E.valueField=A('<input type="hidden"/>');E.valueField[0].id=E.valueField[0].name=E.textFieldID+"_val"}if(E.valueField[0].name==undefined){E.valueField[0].name=E.valueField[0].id}E.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');E.selectBox=A('<div class="l-box-select"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0"></table></div></div>');E.selectBox.table=A("table",E.selectBox);E.wrapper=E.inputText.wrap('<div class="l-text"></div>').parent();E.wrapper.append(E.link).after(E.selectBox).after(E.valueField);if(!E.inputText.hasClass("l-text-field")){E.inputText.addClass("l-text-field")}if(B.width){E.wrapper.css({width:B.width});E.inputText.css({width:B.width-20})}if(B.height){E.wrapper.height(B.height);E.inputText.height(B.height-2);E.link.height(B.height-4)}if(B.isShowCheckBox&&!E.select){A("table",E.selectBox).addClass("l-table-checkbox")}else{A("table",E.selectBox).addClass("l-table-nocheckbox")}if(B.resize&&A.fn.ligerResizable){E.selectBox.ligerResizable({handles:"se,s",onStartResize:function(){E.resizing=true},onStopResize:function(){E.resizing=false}});E.selectBox.append("<div class='l-btn-nw-drop'></div>")}E.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){D.toggleSelectBox(E.selectBox.is(":visible"))});E.inputText.click(function(){D.toggleSelectBox(E.selectBox.is(":visible"))});E.resizing=false;E.selectBox.hover(null,function(F){if(E.selectBox.is(":visible")&&!E.boxToggling&&!E.resizing){D.toggleSelectBox(true)}});E.bulidContent();D.init();if(B.selectBoxWidth){E.selectBox.width(B.selectBoxWidth)}else{E.selectBox.css("width",E.wrapper.css("width"))}var C=A("tr",E.selectBox.table).length;if(!B.selectBoxHeight&&C<8){B.selectBoxHeight=C*30}if(B.selectBoxHeight){E.selectBox.height(B.selectBoxHeight)}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_ComboBox"]=E;this.usedComboBox=true})}})(jQuery);(function(A){A.fn.ligerDateEditor=function(B){B=B||{};B=A.extend({dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭",format:"yyyy-MM-dd hh:mm",showTime:false,onChangeDate:false},B);if(!B.showTime&&B.format.indexOf(" hh:mm")>-1){B.format=B.format.replace(" hh:mm","")}return this.each(function(){if(this.useDateEditor){return}if(this.tagName.toLowerCase()!="input"||this.type!="text"){return}var E={bulidContent:function(){var H=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();var F=E.currentDate.month;var G=E.currentDate.year;if(++F==13){F=1;G++}var I=new Date(G,F-1,0).getDate();var J=new Date(E.currentDate.year,E.currentDate.month-1,0).getDate();E.buttons.btnMonth.html(B.monthMessage[E.currentDate.month-1]);E.buttons.btnYear.html(E.currentDate.year);E.toolbar.time.hour.html(E.currentDate.hour);E.toolbar.time.minute.html(E.currentDate.minute);if(E.toolbar.time.hour.html().length==1){E.toolbar.time.hour.html("0"+E.toolbar.time.hour.html())}if(E.toolbar.time.minute.html().length==1){E.toolbar.time.minute.html("0"+E.toolbar.time.minute.html())}A("td",this.body.tbody).each(function(){this.className=""});A("tr",this.body.tbody).each(function(L,K){A("td",K).each(function(P,N){var M=L*7+(P-H);var O=M+1;if(E.selectedDate&&E.currentDate.year==E.selectedDate.year&&E.currentDate.month==E.selectedDate.month&&M+1==E.selectedDate.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-selected");A(N).siblings().removeClass("l-box-dateeditor-selected")}else{if(E.currentDate.year==E.now.year&&E.currentDate.month==E.now.month&&M+1==E.now.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-today")}else{if(M<0){O=J+O;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(M>I-1){O=O-I;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected")}else{N.className=""}}}}}A(N).html(O)})})},toggleDateEditor:function(G){var F=E.text.height();E.editorToggling=true;if(G){E.dateeditor.hide("fast",function(){E.editorToggling=false})}else{if(E.text.offset().top+4>E.dateeditor.height()&&E.text.offset().top+E.dateeditor.height()+F+4-A(window).scrollTop()>A(window).height()){E.dateeditor.css("marginTop",-1*(E.dateeditor.height()+F+5));E.showOnTop=true}else{E.showOnTop=false}E.dateeditor.slideDown("fast",function(){E.editorToggling=false})}},showDate:function(){if(!this.selectedDate){return}var F=E.selectedDate.year+"/"+E.selectedDate.month+"/"+E.selectedDate.date;this.currentDate.hour=parseInt(E.toolbar.time.hour.html());this.currentDate.minute=parseInt(E.toolbar.time.minute.html());if(B.showTime){F+=" "+this.currentDate.hour+":"+this.currentDate.minute}this.inputText.val(F);this.inputText.trigger("change")},isDateTime:function(G){var F=G.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(F==null){return false}var H=new Date(F[1],F[3]-1,F[4]);if(H=="NaN"){return false}return(H.getFullYear()==F[1]&&(H.getMonth()+1)==F[3]&&H.getDate()==F[4])},isLongDateTime:function(H){var G=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var F=H.match(G);if(F==null){return false}var I=new Date(F[1],F[3]-1,F[4],F[5],F[6]);if(I=="NaN"){return false}return(I.getFullYear()==F[1]&&(I.getMonth()+1)==F[3]&&I.getDate()==F[4]&&I.getHours()==F[5]&&I.getMinutes()==F[6])},getFormatDate:function(H){if(H=="NaN"){return null}var G=B.format;var I={"M+":H.getMonth()+1,"d+":H.getDate(),"h+":H.getHours(),"m+":H.getMinutes(),"s+":H.getSeconds(),"q+":Math.floor((H.getMonth()+3)/3),"S":H.getMilliseconds()};if(/(y+)/.test(G)){G=G.replace(RegExp.$1,(H.getFullYear()+"").substr(4-RegExp.$1.length))}for(var F in I){if(new RegExp("("+F+")").test(G)){G=G.replace(RegExp.$1,RegExp.$1.length==1?I[F]:("00"+I[F]).substr((""+I[F]).length))}}return G},onTextChange:function(){var G=E.inputText.val();if(!B.showTime&&!E.isDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{if(B.showTime&&!E.isLongDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{while(G.indexOf("-")>-1){G=G.replace("-","/")}var F=E.getFormatDate(new Date(G));if(F==null){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}E.usedDate=new Date(G);E.selectedDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.currentDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.inputText.val(F);if(B.onChangeDate){B.onChangeDate(F)}if(A(E.dateeditor).is(":visible")){E.bulidContent()}}}}};E.inputText=A(this);if(!E.inputText.hasClass("l-text-field")){E.inputText.addClass("l-text-field")}E.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');E.text=E.inputText.wrap('<div class="l-text"></div>').parent();E.text.append(E.link);if(B.width){E.text.css({width:B.width});E.inputText.css({width:B.width-20})}var C="";C+="<div class='l-box-dateeditor' style='display:none'>";C+="    <div class='l-box-dateeditor-header'>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>";C+="    </div>";C+="    <div class='l-box-dateeditor-body'>";C+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>";C+="            <thead>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </thead>";C+="            <tbody>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </tbody>";C+="        </table>";C+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="    </div>";C+="    <div class='l-box-dateeditor-toolbar'>";C+="        <div class='l-box-dateeditor-time'></div>";C+="        <div class='l-button l-button-today'></div>";C+="        <div class='l-button l-button-close'></div>";C+="        <div class='l-clear'></div>";C+="    </div>";C+="</div>";E.dateeditor=A(C);E.text.after(E.dateeditor);E.header=A(".l-box-dateeditor-header",E.dateeditor);E.body=A(".l-box-dateeditor-body",E.dateeditor);E.toolbar=A(".l-box-dateeditor-toolbar",E.dateeditor);E.body.thead=A("thead",E.body);E.body.tbody=A("tbody",E.body);E.body.monthselector=A(".l-box-dateeditor-monthselector",E.body);E.body.yearselector=A(".l-box-dateeditor-yearselector",E.body);E.body.hourselector=A(".l-box-dateeditor-hourselector",E.body);E.body.minuteselector=A(".l-box-dateeditor-minuteselector",E.body);E.toolbar.time=A(".l-box-dateeditor-time",E.toolbar);E.toolbar.time.hour=A("<a></a>");E.toolbar.time.minute=A("<a></a>");E.buttons={btnPrevYear:A(".l-box-dateeditor-header-prevyear",E.header),btnNextYear:A(".l-box-dateeditor-header-nextyear",E.header),btnPrevMonth:A(".l-box-dateeditor-header-prevmonth",E.header),btnNextMonth:A(".l-box-dateeditor-header-nextmonth",E.header),btnYear:A(".l-box-dateeditor-header-year",E.header),btnMonth:A(".l-box-dateeditor-header-month",E.header),btnToday:A(".l-button-today",E.toolbar),btnClose:A(".l-button-close",E.toolbar)};var D=new Date();E.now={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.currentDate={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.selectedDate=null;E.usedDate=null;A("td",E.body.thead).each(function(G,F){A(F).html(B.dayMessage[G])});A("li",E.body.monthselector).each(function(G,F){A(F).html(B.monthMessage[G])});E.buttons.btnToday.html(B.todayMessage);E.buttons.btnClose.html(B.closeMessage);if(B.showTime){E.toolbar.time.show();E.toolbar.time.append(E.toolbar.time.hour).append(":").append(E.toolbar.time.minute);A("li",E.body.hourselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)});A("li",E.body.minuteselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)})}E.bulidContent();E.onTextChange();E.dateeditor.hover(null,function(F){if(E.dateeditor.is(":visible")&&!E.editorToggling){E.toggleDateEditor(true)}});E.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){E.bulidContent();E.toggleDateEditor(E.dateeditor.is(":visible"))});E.buttons.btnClose.click(function(){E.toggleDateEditor(true)});A("td",E.body.tbody).hover(function(){if(A(this).hasClass("l-box-dateeditor-today")){return}A(this).addClass("l-box-dateeditor-over")},function(){A(this).removeClass("l-box-dateeditor-over")}).click(function(){A(".l-box-dateeditor-selected",E.body.tbody).removeClass("l-box-dateeditor-selected");if(!A(this).hasClass("l-box-dateeditor-today")){A(this).addClass("l-box-dateeditor-selected")}E.currentDate.date=parseInt(A(this).html());E.currentDate.day=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();if(A(this).hasClass("l-box-dateeditor-out")){if(A("tr",E.body.tbody).index(A(this).parent())==0){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}}else{if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}}}E.selectedDate={year:E.currentDate.year,month:E.currentDate.month,date:E.currentDate.date};E.showDate();E.editorToggling=true;E.dateeditor.slideToggle("fast",function(){E.editorToggling=false})});A(".l-box-dateeditor-header-btn",E.header).hover(function(){A(this).addClass("l-box-dateeditor-header-btn-over")},function(){A(this).removeClass("l-box-dateeditor-header-btn-over")});E.buttons.btnYear.click(function(){if(!E.body.yearselector.is(":visible")){A("li",E.body.yearselector).each(function(F,G){var H=E.currentDate.year+(F-4);if(H==E.currentDate.year){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}A(this).html(H)})}E.body.yearselector.slideToggle()});E.body.yearselector.hover(function(){},function(){A(this).slideUp()});A("li",E.body.yearselector).click(function(){E.currentDate.year=parseInt(A(this).html());E.body.yearselector.slideToggle();E.bulidContent()});E.buttons.btnMonth.click(function(){A("li",E.body.monthselector).each(function(F,G){if(E.currentDate.month==F+1){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.monthselector.slideToggle()});E.body.monthselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.monthselector).click(function(){var F=A("li",E.body.monthselector).index(this);E.currentDate.month=F+1;E.body.monthselector.slideToggle();E.bulidContent()});E.toolbar.time.hour.click(function(){A("li",E.body.hourselector).each(function(F,G){if(E.currentDate.hour==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.hourselector.slideToggle()});E.body.hourselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.hourselector).click(function(){var F=A("li",E.body.hourselector).index(this);E.currentDate.hour=F;E.body.hourselector.slideToggle();E.bulidContent()});E.toolbar.time.minute.click(function(){A("li",E.body.minuteselector).each(function(F,G){if(E.currentDate.minute==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.minuteselector.slideToggle("fast",function(){var F=A("li",this).index(A("li.l-selected",this));if(F>29){var G=(A("li.l-selected",this).offset().top-A(this).offset().top);A(this).animate({scrollTop:G})}})});E.body.minuteselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.minuteselector).click(function(){var F=A("li",E.body.minuteselector).index(this);E.currentDate.minute=F;E.body.minuteselector.slideToggle("fast");E.bulidContent()});E.buttons.btnPrevMonth.click(function(){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}E.bulidContent()});E.buttons.btnNextMonth.click(function(){if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}E.bulidContent()});E.buttons.btnPrevYear.click(function(){E.currentDate.year--;E.bulidContent()});E.buttons.btnNextYear.click(function(){E.currentDate.year++;E.bulidContent()});E.buttons.btnToday.click(function(){E.currentDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.selectedDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.showDate();E.dateeditor.slideToggle("fast")});E.inputText.change(function(){E.onTextChange()});this.useDateEditor=true})}})(jQuery);(function(A){A.fn.ligerDrag=function(B){B=A.extend({onStartDrag:false,onDrag:false,onStopDrag:false},B||{});return this.each(function(){if(this.useDrag){return}var C={start:function(D){A("body").css("cursor","move");C.current={target:C.target,left:C.target.offset().left,top:C.target.offset().top,startX:D.pageX||D.screenX,startY:D.pageY||D.clientY};A(document).bind("mouseup",C.stop);A(document).bind("mousemove",C.drag);if(B.onStartDrag){B.onStartDrag(C.current,D)}},drag:function(F){var D=F.pageX||F.screenX;var E=F.pageY||F.screenY;C.current.diffX=D-C.current.startX;C.current.diffY=E-C.current.startY;if(B.onDrag){if(B.onDrag(C.current,F)!=false){C.applyDrag()}}else{C.applyDrag()}},stop:function(D){A(document).unbind("mousemove",C.drag);A(document).unbind("mouseup",C.stop);A("body").css("cursor","");if(B.onStopDrag){B.onStopDrag(C.current,D)}C.current=null},applyDrag:function(){if(C.current.diffX){C.target.css("left",(C.current.left+C.current.diffX))}if(C.current.diffY){C.target.css("top",(C.current.top+C.current.diffY))}}};C.target=A(this);if(B.handler==undefined||B.handler==null){C.handler=A(this)}else{C.handler=(typeof B.handler=="string"?A(B.handler,this):B.handle)}C.handler.hover(function(){A("body").css("cursor","move")},function(){A("body").css("cursor","")}).mousedown(function(D){C.start(D);return false});this.useDrag=true})}})(jQuery);(function(A){A.fn.ligerEasyTab=function(B){B=B||{};return this.each(function(){if(this.manager){return}if(A(this).hasClass("l-hidden")){return}var D={};this.manager=D;D.tabs=A(this);if(!D.tabs.hasClass("l-easytab")){D.tabs.addClass("l-easytab")}var C=0;if(A("> div[lselected=true]",D.tabs).length>0){C=A("> div",D.tabs).index(A("> div[lselected=true]",D.tabs))}D.tabs.ul=A('<ul class="l-easytab-header"></ul>');A("> div",D.tabs).each(function(G,F){var E=A("<li><span></span></li>");if(G==C){A("span",E).addClass("l-selected")}if(A(F).attr("title")){A("span",E).html(A(F).attr("title"))}D.tabs.ul.append(E);if(!A(F).hasClass("l-easytab-panelbox")){A(F).addClass("l-easytab-panelbox")}});D.tabs.ul.prependTo(D.tabs);A(".l-easytab-panelbox:eq("+C+")",D.tabs).show().siblings(".l-easytab-panelbox").hide();A("> ul:first span",D.tabs).click(function(){if(A(this).hasClass("l-selected")){return}var E=A("> ul:first span",D.tabs).index(this);A(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected");A(".l-easytab-panelbox:eq("+E+")",D.tabs).show().siblings(".l-easytab-panelbox").hide()}).not("l-selected").hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})})}})(jQuery);(function(A){A.fn.ligerFrom=function(B){B=B||{};return this.each(function(){A(":text[ltype=text]",this).ligerTextBox();A("select",this).ligerComboBox();A(":text[ltype=int]",this).ligerSpinner({type:"int"});A(":text[ltype=date]",this).ligerDateEditor();A("input:radio",this).ligerRadio();A("input:checkbox",this).ligerCheckBox()})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function($){$.fn.ligerGetGridManager=function(){return LigerUIManagers[this[0].id+"_Grid"]};$.ligerAddGrid=function(grid,p){if(grid.usedGrid){return}$(grid).hasClass("l-panel")||$(grid).addClass("l-panel");var gridHTML="";gridHTML+="        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>";gridHTML+="                    <div class='l-grid-loading'></div>";gridHTML+="                    <div class='l-grid-editor'></div>";gridHTML+="        <div class='l-panel-bwarp'>";gridHTML+="            <div class='l-panel-body'>";gridHTML+="                <div class='l-grid'>";gridHTML+="                    <div class='l-grid-dragging-line'></div>";gridHTML+="                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>";gridHTML+="                    <div class='l-grid-header'>";gridHTML+="                       <div class='l-grid-header-inner'>";gridHTML+="                        <table class='l-grid-td-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table>";gridHTML+="                    </div>";gridHTML+="                    </div>";gridHTML+="                    <div class='l-grid-scroller'>";gridHTML+="                        <div class='l-grid-body'>";gridHTML+="                        </div>";gridHTML+="                    </div>";gridHTML+="                 </div>";gridHTML+="              </div>";gridHTML+="         </div>";gridHTML+="         <div class='l-panel-bar'>";gridHTML+="            <div class='l-panel-bbar-inner'>";gridHTML+="            <div class='l-bar-group l-bar-selectpagesize'></div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>";gridHTML+="                    <div class='l-bar-button l-bar-btnprev'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                     <div class='l-bar-button l-bar-btnnext'><span></span></div>";gridHTML+="                    <div class='l-bar-button l-bar-btnlast'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                     <div class='l-bar-button l-bar-btnload'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'><span class='l-bar-text'></span></div>";gridHTML+="            </div>";gridHTML+="         </div>";$(grid).html(gridHTML);var g={loadData:function(loadService){if(!p.newPage){p.newPage=1}if(p.dataAction=="server"){if(!p.sortOrder){p.sortOrder="asc"}}var param=[];if(p.parms&&p.parms.length){$(p.parms).each(function(){param.push({name:this.name,value:this.value})})}if(p.dataAction=="server"){if(p.usePager){param.push({name:"page",value:p.newPage});param.push({name:"pagesize",value:p.pageSize})}if(p.sortName){param.push({name:"sortname",value:p.sortName});param.push({name:"sortorder",value:p.sortOrder})}}g.gridloading.show();$(".l-bar-btnload span",g.toolbar).addClass("l-disabled");this.loading=true;if(p.dataType=="local"){if(!g.data){g.data=$.extend({},p.data)}if(p.usePager){g.currentData=g.getCurrentPageData(g.data)}else{g.currentData=$.extend({},g.data)}g.showData(g.currentData)}else{if(p.dataAction=="local"&&g.data&&!loadService){g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}else{$.ajax({type:p.method,url:p.url,data:param,dataType:"json",success:function(data){g.data=$.extend({},data);if(p.dataAction=="server"){g.currentData=g.data;g.showData(g.currentData)}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},error:function(XMLHttpRequest,textStatus,errorThrown){g.gridloading.hide();$(".l-bar-btnload span",g.toolbar).removeClass("l-disabled");try{if(p.onError){p.onError(XMLHttpRequest,textStatus,errorThrown)}}catch(e){}}})}}},setOptions:function(parms){$.extend(p,parms)},showData:function(data){g.isDataChanged=false;$(".l-bar-btnloading",this.toolbar).removeClass("l-bar-btnloading");g.gridloading.hide();$(".l-bar-btnload span",g.toolbar).removeClass("l-disabled");this.loading=false;if(p.usePager){p.total=data.Total;p.page=p.newPage;p.pageCount=Math.ceil(p.total/p.pageSize);this.buildPager()}$(".l-grid-row,.l-grid-detailpanel,.l-grid-totalsummary",g.gridbody).remove();var rowlenth=data.Rows.length;$(data.Rows).each(function(i,item){if(!item){return}var row=$("<div class='l-grid-row' rowindex='"+i+"'><table class='l-grid-row-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");g.gridbody.append(row);if(!p.usePager&&i==rowlenth-1&&!g.isTotalSummary()){row.addClass("l-grid-row-last")}$(".l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){if($(headerCell).hasClass("l-grid-hd-cell-detail")){var rowCell=$("<td class='l-grid-row-cell l-grid-row-cell-detail'><div class='l-grid-row-cell-inner'><span></span></div></td>");rowCell.css("width",$(headerCell).css("width"));$("tr",row).append(rowCell);$("span",rowCell).click(function(){if($(this).hasClass("l-open")){$(this).removeClass("l-open");row.next(".l-grid-detailpanel").remove()}else{$(this).addClass("l-open");var detailPanel=$("<div class='l-grid-detailpanel'></div>");detailPanel.hide();row.after(detailPanel);p.detail.onShowDetail(item,detailPanel[0])}});return}columnname=$(headerCell).attr("columnname");columnindex=$(headerCell).attr("columnindex");var rowCell=$("<td class='l-grid-row-cell' columnindex='"+columnindex+"'><div class='l-grid-row-cell-inner'></div></td>");var content="";var column=p.columns[columnindex];if(column&&column.align){$("> .l-grid-row-cell-inner",rowCell).css({textAlign:column.align})}if(column&&column.render){content=column.render(item,i)}else{if(columnname){if(column.type&&column.type=="date"){var date=p.renderDate(item[columnname]);item[columnname]=date;if(date!=null){if(column.format){content=g.getFormatDate(date,column.format)}else{content=g.getFormatDate(date,p.dateFormat)}}}else{content=item[columnname]}}}if(columnname){rowCell.attr({columnname:columnname})}$("> .l-grid-row-cell-inner",rowCell).html(content);$("tr",row).append(rowCell);rowCell.css("width",$(headerCell).css("width"));$(">div:first",rowCell).width($(headerCell).width()-8);if(!$(this).is(":visible")){rowCell.hide()}})});g.onResize();g.bulidTotalSummary();$(".l-grid-row",g.gridbody).hover(function(){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")}).click(function(){if($(this).hasClass("l-grid-row-selected")){$(this).removeClass("l-grid-row-selected")}else{$(this).siblings(".l-grid-row-selected").removeClass("l-grid-row-selected");$(this).addClass("l-grid-row-selected")}});$(".l-grid-row-cell",g.gridbody).click(function(e){if(p.enabledEdit){g.applyEditor(e)}});if(p.onAfterShowData){p.onAfterShowData(grid)}},applyEditor:function(e){var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}var rowcell;if($(obj).hasClass("l-grid-row-cell")){rowcell=obj}if($(obj).parent().hasClass("l-grid-row-cell")){rowcell=$(obj).parent()[0]}if(!rowcell){return}var row=$(rowcell).parent().parent().parent().parent();var rowindex=$(row).attr("rowindex");var columnindex=$(rowcell).attr("columnindex");var columnname=$(rowcell).attr("columnname");var column=p.columns[columnindex];var left=$(rowcell).offset().left-g.body.offset().left;var top=$(rowcell).offset().top-$(grid).offset().top-2;g.grideditor.css({left:left,top:top,width:$(rowcell).css("width"),height:$(rowcell).css("height")}).html("");g.grideditor.editingCell=null;if(column.editor&&column.editor.type=="date"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerDateEditor({width:$(rowcell).width(),onChangeDate:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="select"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());var options={width:$(rowcell).width(),data:column.editor.data,isMultiSelect:false,onSelected:function(newValue,newText){$(rowcell).addClass("l-grid-row-cell-edited");if(column.editor.valueColumnName&&columnname){g.currentData.Rows[rowindex][columnname]=newText}g.updateData(rowcell,newValue);if(column.editor.render){$(obj).html(column.editor.render(g.currentData.Rows[rowindex]))}else{$(obj).html(newText)}}};if(column.editor.dataValueField){options.valueField=column.editor.dataValueField}if(column.editor.dataDisplayField){options.displayField=options.textField=column.editor.dataDisplayField}if(column.editor.valueColumnName){options.initValue=g.currentData.Rows[rowindex][column.editor.valueColumnName]}else{if(columnname){options.initText=g.currentData.Rows[rowindex][columnname]}}$inputText.ligerComboBox(options);g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="int"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerSpinner({width:$(rowcell).width(),height:$(rowcell).height(),type:"int",onChangeValue:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="text"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerTextBox({width:$(rowcell).width(),onChangeValue:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}}}}},getFormatDate:function(date,dateformat){if(date=="NaN"){return null}var format=dateformat;var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format},deleteSelectedRow:function(){var row=$(".l-grid-row-selected",g.gridbody);g.deleteRow(row)},deleteRow:function(row){g.popup.hide();g.grideditor.html("").hide();var rowindex=row.attr("rowindex");$(row).remove();g.deleteData(rowindex);g.isDataChanged=true},deleteData:function(rowindex){g.currentData.Rows[rowindex].__status="delete"},updateData:function(cell,value){var columnindex=$(cell).attr("columnindex");var column=p.columns[columnindex];var columnname=column.name;var row=$(cell).parents(".l-grid-row:eq(0)");var rowindex=row.attr("rowindex");if(column.type&&column.type=="int"){g.currentData.Rows[rowindex][columnname]=parseInt(value)}else{if(column&&column.editor&&column.editor.type=="select"){g.currentData.Rows[rowindex][column.editor.valueColumnName?column.editor.valueColumnName:columnname]=value}else{g.currentData.Rows[rowindex][columnname]=value}}if(g.currentData.Rows[rowindex].__status==undefined){g.currentData.Rows[rowindex].__status="update"}g.isDataChanged=true},addRow:function(){var rowindex=g.currentData.Rows.length;g.currentData.Rows[rowindex]={};var rowdata=g.currentData.Rows[rowindex];if(!p.usePager&&!g.isTotalSummary()){$("> .l-grid-row:last",g.gridbody).removeClass("l-grid-row-last")}var row=$("<div class='l-grid-row' rowindex='"+rowindex+"'><table class='l-grid-row-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");g.gridbody.append(row);if(!p.usePager&&!g.isTotalSummary()){row.addClass("l-grid-row-last")}var celllength=$("tr > .l-grid-hd-cell",g.gridheader).length;$("tr > .l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){var columnname=$(headerCell).attr("columnname");var columnindex=$(headerCell).attr("columnindex");var column=p.columns[columnindex];var rowCell=$("<td class='l-grid-row-cell' columnindex='"+columnindex+"'><div class='l-grid-row-cell-inner'></div></td>");if(celllength==headerCellIndex+1){rowCell.addClass("l-grid-row-cell-last")}if(columnname){rowdata[columnname]="";if(column.type&&column.type=="int"){rowdata[columnname]=0}rowCell.attr({columnname:columnname})}$(".l-grid-row-cell-inner",rowCell).html(rowdata[columnname]);$("tr",row).append(rowCell);rowCell.css("width",$(headerCell).css("width"));if(column.align){$(".l-grid-row-cell-inner",rowCell).css({textAlign:column.align})}if($(headerCell).is(":visible")==false){rowCell.hide()}});rowdata.__status="add";row.click(function(e){$(this).siblings(".l-grid-row-selected").removeClass("l-grid-row-selected");$(this).addClass("l-grid-row-selected");if(p.enabledEdit){g.applyEditor(e)}}).hover(function(){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")});g.isDataChanged=true},getData:function(){if(g.currentData==null){return null}return g.currentData.Rows},getCurrentPageData:function(jsonObj){var data={Rows:new Array(),Total:jsonObj.Rows.length};if(!p.newPage){p.newPage=1}for(i=(p.newPage-1)*p.pageSize;i<jsonObj.Rows.length&&i<p.newPage*p.pageSize;i++){var obj=$.extend({},jsonObj.Rows[i]);data.Rows.push(obj)}return data},getColumn:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){return p.columns[i]}}return null},getColumnType:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){if(p.columns[i].type){return p.columns[i].type}return"string"}}return null},compareData:function(data1,data2,columnName,columnType){switch(columnType){case"int":return parseInt(data1[columnName])<parseInt(data2[columnName])?-1:parseInt(data1[columnName])>parseInt(data2[columnName])?1:0;case"float":return parseFloat(data1[columnName])<parseFloat(data2[columnName])?-1:parseFloat(data1[columnName])>parseFloat(data2[columnName])?1:0;case"string":return data1[columnName].localeCompare(data2[columnName]);case"date":return data1[columnName]<data2[columnName]?-1:data1[columnName]>data2[columnName]?1:0}return data1[columnName].localeCompare(data2[columnName])},isTotalSummary:function(){for(var i=0;i<p.columns.length;i++){if(p.columns[i].totalSummary){return true}}return false},bulidTotalSummary:function(){if(!g.isTotalSummary()){return false}if(!g.currentData||g.currentData.Rows.length==0){return false}if(g.gridbody.totalsummary){g.gridbody.totalsummary.remove()}g.gridbody.totalsummary=$("<div class='l-grid-totalsummary'><table class='l-grid-totalsummary-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");if(!p.usePager){g.gridbody.totalsummary.addClass("l-grid-totalsummary-nobottom")}g.gridbody.append(g.gridbody.totalsummary);$(".l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){var cell=$("<td class='l-grid-totalsummary-cell'><div class='l-grid-totalsummary-cell-inner'></div></td>");$("tr",g.gridbody.totalsummary).append(cell);cell.css("width",$(headerCell).css("width"));columnname=$(headerCell).attr("columnname");columnindex=$(headerCell).attr("columnindex");if(!$(this).is(":visible")){cell.hide()}if(columnname){cell.attr({columnname:columnname})}if(!columnindex){return}cell.attr({columnindex:columnindex});var column=p.columns[columnindex];if(column.align){$(".l-grid-totalsummary-cell-inner",cell).css({textAlign:column.align})}if(column.totalSummary){if(column.totalSummary.type){var types=column.totalSummary.type.split(",");var isExist=function(type){for(var i=0;i<types.length;i++){if(types[i].toLowerCase()==type.toLowerCase()){return true}}return false};var sum=0,count=0,avg=0;var max=parseFloat(g.currentData.Rows[0][column.name]);var min=parseFloat(g.currentData.Rows[0][column.name]);for(var i=0;i<g.currentData.Rows.length;i++){var value=parseFloat(g.currentData.Rows[i][column.name]);sum+=value;count+=1;if(value>max){max=value}if(value<min){min=value}}avg=sum*1/g.currentData.Rows.length;if(isExist("sum")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Sum="+sum.toFixed(2)+"</div>")}if(isExist("count")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Count="+count+"</div>")}if(isExist("max")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Max="+max.toFixed(2)+"</div>")}if(isExist("min")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Min="+min.toFixed(2)+"</div>")}if(isExist("avg")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Avg="+avg.toFixed(2)+"</div>")}}}})},changeSort:function(columnName,sortOrder){if(this.loading){return true}if(p.dataAction=="local"){var columnType=g.getColumnType(columnName);if(!g.sortedData){g.sortedData=$.extend({},g.data)}if(p.sortName==columnName){g.sortedData.Rows.reverse()}else{g.sortedData.Rows.sort(function(data1,data2){return g.compareData(data1,data2,columnName,columnType)})}if(p.usePager){g.currentData=g.getCurrentPageData(g.sortedData)}else{g.currentData=g.sortedData}g.showData(g.currentData)}p.sortName=columnName;p.sortOrder=sortOrder;if(p.dataAction=="server"){g.loadData()}},changePage:function(ctype){if(this.loading){return true}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}switch(ctype){case"first":if(p.page==1){return}p.newPage=1;break;case"prev":if(p.page==1){return}if(p.page>1){p.newPage=parseInt(p.page)-1}break;case"next":if(p.page>=p.pageCount){return}p.newPage=parseInt(p.page)+1;break;case"last":if(p.page>=p.pageCount){return}p.newPage=p.pageCount;break;case"input":var nv=parseInt($(".pcontrol input",this.toolbar).val());if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pageCount){nv=p.pageCount}}$(".pcontrol input",this.toolbar).val(nv);p.newPage=nv;break}if(p.newPage==p.page){return false}if(p.newPage==1){$(".l-bar-btnfirst span",g.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnfirst span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).removeClass("l-disabled")}if(p.newPage==p.pageCount){$(".l-bar-btnlast span",g.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnlast span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).removeClass("l-disabled")}if(p.onChangePage){p.onChangePage(p.newPage)}if(p.dataAction=="server"){this.loadData()}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},buildPager:function(){$(".pcontrol input",this.toolbar).val(p.page);$(".pcontrol span",this.toolbar).html(p.pageCount);var r1=parseInt((p.page-1)*p.pageSize)+1;var r2=parseInt(r1)+parseInt(p.pageSize)-1;if(p.total<r2){r2=p.total}var stat=p.pageStatMessage;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".l-bar-text",this.toolbar).html(stat);if(p.page==1){$(".l-bar-btnfirst span",g.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnfirst span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).removeClass("l-disabled")}if(p.page==p.pageCount){$(".l-bar-btnlast span",g.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnlast span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).removeClass("l-disabled")}},getSelectedRow:function(){var row=$("> .l-grid-row-selected",g.gridbody);var rowindex=row.attr("rowindex");return g.getRowByRowIndex(parseInt(rowindex))},getRowByRowIndex:function(rowindex){if(g.currentData==null){return null}return g.currentData.Rows[rowindex]},onResize:function(){if(p.height&&p.height!="auto"){var h=0;if(p.height.indexOf("%")>0){if($(grid).parent()[0].tagName.toLowerCase()=="body"){var windowHeight=$(window).height();windowHeight-=parseInt($(grid).parent().css("paddingTop"));windowHeight-=parseInt($(grid).parent().css("paddingBottom"));h=windowHeight*parseFloat(p.height)*0.01}else{h=$(grid).parent().height()*parseFloat(p.height)*0.01}}else{h=p.height}if(p.title){h-=g.header.height()}if(p.usePager){h-=g.toolbar.height()}h-=g.gridheader.height();h-=$(grid).offset().top;h-=5;g.scroller.height(h)}if($(grid).width()!=0){if(p.gridMinWidth&&p.gridMinWidth>=$(grid).width()){$(" >div:first",g.gridheader).width(p.gridMinWidth+30);g.gridbody.width(p.gridMinWidth)}else{if(g.gridMinWidth>$(grid).width()){$(" >div:first",g.gridheader).width(g.gridMinWidth+10+30);g.gridbody.width(g.gridMinWidth)}else{$(" >div:first",g.gridheader).width($(grid).width()+10+30);g.gridbody.width($(grid).width())}}}},dragStart:function(dragtype,e,obj){if(dragtype=="colresize"){var columnindex=$(obj).parent().parent().attr("columnindex");if(!columnindex){return}var width=$(obj).parent().parent().width();this.colresize={startX:e.pageX,width:width,columnindex:columnindex};$("body").css("cursor","col-resize");g.draggingline.css({height:g.body.height(),left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft),top:0}).show()}$.fn.ligerNoSelect&&$("body").ligerNoSelect()},dragMove:function(e){if(this.colresize){var diff=e.pageX-this.colresize.startX;var newwidth=this.colresize.width+diff;this.colresize.newwidth=newwidth;$("body").css("cursor","col-resize");g.draggingline.css({left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft)})}},dragEnd:function(e){if(this.colresize){var mincolumnwidth=80;var columnindex=this.colresize.columnindex;var column=p.columns[columnindex];if(column&&column.minWidth){mincolumnwidth=column.minWidth}var newwidth=this.colresize.newwidth;newwidth=newwidth<mincolumnwidth?mincolumnwidth:newwidth;g.gridMinWidth+=(newwidth-parseInt($(".l-grid-hd-cell[columnindex="+columnindex+"]",this.gridheader).css("width")));$(".l-grid-hd-cell[columnindex="+columnindex+"]",this.gridheader).css("width",newwidth);$("> .l-grid-row,> .l-grid-totalsummary",this.gridbody).each(function(){if($(this).hasClass("l-grid-row")){$(".l-grid-row-cell[columnindex="+columnindex+"]",this).css("width",newwidth)}if(g.isTotalSummary()&&$(this).hasClass("l-grid-totalsummary")){$("td[columnindex="+columnindex+"]",this).css("width",newwidth)}});g.onResize();g.draggingline.hide();this.colresize=false}$("body").css("cursor","default");$.fn.ligerNoSelect&&$("body").ligerNoSelect(false)},onClick:function(e){var obj=(e.target||e.srcElement);var tagName=obj.tagName.toLowerCase();if(g.grideditor.editingCell){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-scroller")||$(obj).hasClass("l-grid-row")){g.grideditor.html("").hide()}}if(p.showToggleColBtn){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-scroller")||$(obj).hasClass("l-grid-row")||$(obj).hasClass("l-grid-row-cell-inner")||$(obj).hasClass("l-grid-header")){g.popup.hide()}}},toggleCol:function(columnindex,visible){var headercell=$(".l-grid-hd-cell[columnindex='"+columnindex+"']",this.gridheader);if(!headercell){return}if(visible){headercell.show();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).show()}else{headercell.hide();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).hide()}}};g.header=$(".l-panel-header",grid);g.scroller=$(".l-grid-scroller",grid);g.body=$(".l-panel-body",grid);g.toolbar=$(".l-panel-bar",grid);g.popup=$(".l-grid-popup",grid);g.grideditor=$(".l-grid-editor",grid);g.gridloading=$(".l-grid-loading",grid);g.draggingline=$(".l-grid-dragging-line",grid);g.gridheader=$(".l-grid-header",grid);g.gridbody=$(".l-grid-body",grid);g.currentData=null;if(p.showTitle){$(".l-panel-header-text",g.header).html(p.title)}else{g.header.hide()}if(p.detail&&p.detail.onShowDetail){var detailHeaderCell=$("<td class='l-grid-hd-cell l-grid-hd-cell-detail'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text'></div></td>");detailHeaderCell.css({width:29});$("tr",g.gridheader).append(detailHeaderCell)}g.gridMinWidth=0;$(p.columns).each(function(i,item){var $headerCell=$("<td class='l-grid-hd-cell' columnindex='"+i+"'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-dropleft'></div><div class='l-grid-hd-cell-dropright'></div><div class='l-grid-hd-cell-text'> </div><div class='l-grid-hd-cell-drophandle'></div></td>");if(i==p.columns.length-1){}if(item.name){$headerCell.attr({columnname:item.name})}if(item.isSort!=undefined){$headerCell.attr({isSort:item.isSort})}if(item.isAllowHide!=undefined){$headerCell.attr({isAllowHide:item.isAllowHide})}var headerText="";if(item.display&&item.display!=""){headerText=item.display}else{if(item.headerRender){headerText=item.headerRender(item)}else{headerText="&nbsp;"}}$(".l-grid-hd-cell-text",$headerCell).html(headerText);$("tr",g.gridheader).append($headerCell);if(item.minWidth){$headerCell.width(item.minWidth);if(item.width&&item.width>item.minWidth){$headerCell.width(item.width)}}else{if(item.width){$headerCell.width(item.width)}else{if(p.columnWidth){$headerCell.width(p.columnWidth)}}}g.gridMinWidth+=(parseInt($headerCell.css("width"))+5)});$("tr .l-grid-hd-cell",g.gridheader).each(function(i,td){if($(this).hasClass("l-grid-hd-cell-detail")){return}var isAllowHide=$(this).attr("isAllowHide");if(isAllowHide!=undefined&&isAllowHide.toLowerCase()=="false"){return}var chk='checked="checked"';var columnindex=$(this).attr("columnindex");var columnname=$(this).attr("columnname");if(!columnindex||!columnname){return}var header=$(".l-grid-hd-cell-text",this).html();if(this.style.display=="none"){chk=""}$("tbody",g.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+chk+' class="l-checkbox" columnindex="'+columnindex+'"/></td><td class="l-column-right">'+header+"</td></tr>")});if($.fn.ligerCheckBox){$("input:checkbox",g.popup).ligerCheckBox({onBeforeClick:function(obj){if(!obj.checked){return true}if($("input:checked",g.popup).length<=p.minColToggle){return false}return true}})}if(!p.isScroll){g.scroller.height("auto")}else{if(p.gridHeight){g.scroller.height(p.gridHeight)}}if(p.width){if(p.width=="auto"){$(grid).width(g.gridMinWidth+10)}else{$(grid).width(p.width)}}if(p.height){$(grid).height(p.height)}g.onResize();g.loadData();if(p.usePager){var optStr="";var selectedIndex=-1;$(p.pageSizeOptions).each(function(i,item){var selectedStr="";if(p.pageSize==item){selectedIndex=i}optStr+="<option value='"+item+"' "+selectedStr+" >"+item+"</option>"});$(".l-bar-selectpagesize",g.toolbar).append("<select name='rp'>"+optStr+"</select>");if(selectedIndex!=-1){$(".l-bar-selectpagesize select",g.toolbar)[0].selectedIndex=selectedIndex}if($.fn.ligerComboBox){$(".l-bar-selectpagesize select",g.toolbar).ligerComboBox({onBeforeSelect:function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}return true},width:45})}}else{g.toolbar.hide()}g.gridloading.html(p.loadingMessage);g.header.click(function(){g.popup.hide();g.grideditor.html("").hide()});$(".l-grid-hd-cell",g.gridheader).hover(function(){if(g.colresize){return false}if(p.showToggleColBtn){if($(this).attr("isAllowHide")!=undefined&&$(this).attr("isAllowHide").toLowerCase()=="false"){return}var btn=$("<div class='l-grid-hd-cell-btn'><span></span></div>");$(".l-grid-hd-cell-inner",this).append(btn);var islast=$(this).hasClass("l-grid-hd-cell-last");btn.click(function(){var left=($(this).offset().left-g.body.offset().left+parseInt(g.body[0].scrollLeft));if(islast){left-=70}g.popup.css({left:left,top:g.gridheader.height()+1});g.popup.toggle()})}return false},function(){$(this).removeClass("l-grid-hd-cell-over");if(p.showToggleColBtn){$(".l-grid-hd-cell-btn",this).remove()}}).click(function(e){if(!$(this).attr("columnname")){return}if($(this).attr("isSort")!=undefined&&$(this).attr("isSort").toLowerCase()=="false"){return}var obj=(e.target||e.srcElement);if(obj.tagName.toLowerCase()=="span"||$(obj).hasClass("l-grid-hd-cell-btn")){return}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}var sort=$(".l-grid-hd-cell-sort",this);var columnName=$(this).attr("columnname");if(sort.length>0){if(sort.hasClass("l-grid-hd-cell-sort-asc")){sort.removeClass("l-grid-hd-cell-sort-asc");sort.addClass("l-grid-hd-cell-sort-desc");g.changeSort(columnName,"desc")}else{if(sort.hasClass("l-grid-hd-cell-sort-desc")){sort.removeClass("l-grid-hd-cell-sort-desc");sort.addClass("l-grid-hd-cell-sort-asc");g.changeSort(columnName,"asc")}}}else{$(".l-grid-hd-cell-inner",this).append("<div class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'></div>");g.changeSort(columnName,"asc")}$(".l-grid-hd-cell-sort",$(this).siblings()).remove();return false}).mousedown(function(){return false});g.gridheader.click(function(){g.grideditor.html("").hide()});if(p.allowAdjustColWidth){$(".l-grid-hd-cell-drophandle",g.gridheader).mousedown(function(e){g.dragStart("colresize",e,this)})}if(p.showToggleColBtn){$("tr",g.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var onPopupCheckboxChange=function(){if($("input:checked",g.popup).length+1<=p.minColToggle){return false}g.toggleCol($(this).attr("columnindex"),this.checked)};if($.fn.ligerCheckBox){$(":checkbox",g.popup).change(onPopupCheckboxChange)}else{$(":checkbox",g.popup).click(onPopupCheckboxChange)}}g.scroller.scroll(function(){if(g.scroller[0].scrollLeft==undefined){return}var scrollLeft=parseInt(g.scroller[0].scrollLeft);g.gridheader[0].scrollLeft=scrollLeft});$("select",g.toolbar).change(function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}p.newPage=1;p.pageSize=this.value;g.loadData()});$(".pcontrol input",g.toolbar).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});$(".l-bar-button",g.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}).click(function(){if($(this).hasClass("l-bar-btnfirst")){g.changePage("first")}else{if($(this).hasClass("l-bar-btnprev")){g.changePage("prev")}else{if($(this).hasClass("l-bar-btnnext")){g.changePage("next")}else{if($(this).hasClass("l-bar-btnlast")){g.changePage("last")}else{if($(this).hasClass("l-bar-btnload")){if($("span",this).hasClass("l-disabled")){return false}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}g.loadData()}}}}}});g.toolbar.click(function(){g.popup.hide();g.grideditor.html("").hide()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()}).click(function(e){g.onClick(e)});if(grid.id==undefined){grid.id="LigerUI_"+new Date().getTime()}LigerUIManagers[grid.id+"_Grid"]=g;grid.usedGrid=true;$(window).resize(function(){g.onResize()})};$.ligerGridSetParms=function(p,fixedP){p=$.extend({},$.ligerDefaults.Grid,p);if(p.url&&p.data){p.dataType="local"}else{if(p.url&&!p.data){p.dataType="server"}else{if(!p.url&&p.data){p.dataType="local"}else{if(!p.url&&!p.data){p.dataType="local";p.data=[]}}}}if(p.dataType=="local"){p.dataAction="local"}if(fixedP){p=$.extend(p,fixedP)}return p};$.fn.ligerGrid=function(p){var fixedP={};p=p||{};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})};$.fn.ligerSimpleGrid=function(p){var fixedP={resizable:false,usePager:false,showTableToggleBtn:false,showCheckbox:false,showToggleColBtn:false,enabledEdit:false,allowAdjustColWidth:false,onDragCol:false,onToggleCol:false,onChangeSort:false,onSuccess:false,onError:false,onSubmit:false};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})};$.ligerDefaults=$.ligerDefaults||{};$.ligerDefaults.Grid={errorMessage:"发生错误",pageStatMessage:"显示记录从{from}到{to}，总数 {total} 条",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",title:null,isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",width:"auto",columnWidth:120,resizable:true,url:false,usePager:true,page:1,total:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:false,allowAdjustColWidth:true,showCheckbox:true,showToggleColBtn:true,enabledEdit:false,isScroll:true,onDragCol:false,onToggleCol:false,onChangeSort:false,onSuccess:false,onSelectedRow:false,onAfterShowData:false,onError:false,onSubmit:false,dateFormat:"yyyy-MM-dd",method:"POST",renderDate:function(value){var da;if(!value){return null}if(typeof value=="object"){return value}if(value.indexOf("Date")>-1){da=eval("new "+value.replace("/","","g").replace("/","","g"))}else{da=eval('new Date("'+value+'");')}return da}}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetLayoutManager=function(){return LigerUIManagers[this[0].id+"_Layout"]};A.fn.ligerRemoveLayoutManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Layout"]=null})};A.fn.ligerLayout=function(B){return this.each(function(){B=A.extend({topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,onHeightChanged:null,isLeftCollapse:false,isRightCollapse:false,space:3},B||{});if(this.usedLayout){return}var F={init:function(){A("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",F.layout).hover(function(){A(this).addClass("l-layout-header-over")},function(){A(this).removeClass("l-layout-header-over")});A(".l-layout-header-toggle",F.layout).hover(function(){A(this).addClass("l-layout-header-toggle-over")},function(){A(this).removeClass("l-layout-header-toggle-over")});A(".l-layout-header-toggle",F.left).click(function(){F.setLeftCollapse(true)});A(".l-layout-header-toggle",F.right).click(function(){F.setRightCollapse(true)});F.middleTop=0;if(F.top){F.middleTop+=F.top.height();F.middleTop+=parseInt(F.top.css("borderTopWidth"));F.middleTop+=parseInt(F.top.css("borderBottomWidth"));F.middleTop+=B.space}if(F.left){F.left.css({top:F.middleTop});F.leftCollapse.css({top:F.middleTop})}if(F.center){F.center.css({top:F.middleTop})}if(F.right){F.right.css({top:F.middleTop});F.rightCollapse.css({top:F.middleTop})}if(F.left){F.left.css({left:0})}F.onResize();F.onResize()},setCollapse:function(){F.leftCollapse.hover(function(){A(this).addClass("l-layout-collapse-left-over")},function(){A(this).removeClass("l-layout-collapse-left-over")});F.leftCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-left-toggle-over")},function(){A(this).removeClass("l-layout-collapse-left-toggle-over")});F.rightCollapse.hover(function(){A(this).addClass("l-layout-collapse-right-over")},function(){A(this).removeClass("l-layout-collapse-right-over")});F.rightCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-right-toggle-over")},function(){A(this).removeClass("l-layout-collapse-right-toggle-over")});F.leftCollapse.toggle.click(function(){F.setLeftCollapse(false)});F.rightCollapse.toggle.click(function(){F.setRightCollapse(false)});if(F.left&&F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle.hide();F.left.hide()}if(F.right&&F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle.hide();F.right.hide()}},setLeftCollapse:function(G){if(!F.left){return false}F.isLeftCollapse=G;if(F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle.hide();F.left.hide()}else{F.leftCollapse.hide();F.leftDropHandle.show();F.left.show()}F.onResize()},setRightCollapse:function(G){if(!F.right){return false}F.isRightCollapse=G;F.onResize();if(F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle.hide();F.right.hide()}else{F.rightCollapse.hide();F.rightDropHandle.show();F.right.show()}F.onResize()},addDropHandle:function(){if(F.left){F.leftDropHandle=A("<div class='l-layout-drophandle-left'></div>");F.layout.append(F.leftDropHandle);F.leftDropHandle.show();F.leftDropHandle.mousedown(function(G){F.start("leftresize",G)})}if(F.right){F.rightDropHandle=A("<div class='l-layout-drophandle-right'></div>");F.layout.append(F.rightDropHandle);F.rightDropHandle.show();F.rightDropHandle.mousedown(function(G){F.start("rightresize",G)})}if(F.top){F.topDropHandle=A("<div class='l-layout-drophandle-top'></div>");F.layout.append(F.topDropHandle);F.topDropHandle.show();F.topDropHandle.mousedown(function(G){F.start("topresize",G)})}if(F.bottom){F.bottomDropHandle=A("<div class='l-layout-drophandle-bottom'></div>");F.layout.append(F.bottomDropHandle);F.bottomDropHandle.show();F.bottomDropHandle.mousedown(function(G){F.start("bottomresize",G)})}F.draggingxline=A("<div class='l-layout-dragging-xline'></div>");F.draggingyline=A("<div class='l-layout-dragging-yline'></div>");F.layout.append(F.draggingxline).append(F.draggingyline)},setDropHandlePosition:function(){if(F.leftDropHandle){F.leftDropHandle.css({left:F.left.width()+parseInt(F.left.css("left")),height:F.middleHeight,top:F.middleTop})}if(F.rightDropHandle){F.rightDropHandle.css({left:parseInt(F.right.css("left"))-B.space,height:F.middleHeight,top:F.middleTop})}if(F.topDropHandle){F.topDropHandle.css({top:F.top.height()+parseInt(F.top.css("top")),width:F.top.width()})}if(F.bottomDropHandle){F.bottomDropHandle.css({top:parseInt(F.bottom.css("top"))-B.space,width:F.bottom.width()})}},onResize:function(){var H=F.layout.height();if(B.height){if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){if(F.layout.parent()[0].tagName.toLowerCase()=="body"){var G=A(window).height();G-=parseInt(F.layout.parent().css("paddingTop"));G-=parseInt(F.layout.parent().css("paddingBottom"));F.layout.height(G*parseFloat(B.height)*0.01)}else{F.layout.height((F.layout.parent().height()*parseFloat(B.height)*0.01))}}else{F.layout.height(B.height)}}F.layoutHeight=F.layout.height();F.middleWidth=F.layout.width();F.middleHeight=F.layout.height();if(F.top){F.middleHeight-=F.top.height();F.middleHeight-=parseInt(F.top.css("borderTopWidth"));F.middleHeight-=parseInt(F.top.css("borderBottomWidth"));F.middleHeight-=B.space}if(F.bottom){F.middleHeight-=F.bottom.height();F.middleHeight-=parseInt(F.bottom.css("borderTopWidth"));F.middleHeight-=parseInt(F.bottom.css("borderBottomWidth"));F.middleHeight-=B.space}F.middleHeight-=2;if(B.onHeightChanged&&F.layoutHeight!=H){B.onHeightChanged({layoutHeight:F.layoutHeight,diff:F.layoutHeight-H,middleHeight:F.middleHeight})}if(F.center){F.centerWidth=F.middleWidth;if(F.left){if(F.isLeftCollapse){F.centerWidth-=F.leftCollapse.width();F.centerWidth-=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("left"));F.centerWidth-=B.space}else{F.centerWidth-=F.leftWidth;F.centerWidth-=parseInt(F.left.css("borderLeftWidth"));F.centerWidth-=parseInt(F.left.css("borderRightWidth"));F.centerWidth-=parseInt(F.left.css("left"));F.centerWidth-=B.space}}if(F.right){if(F.isRightCollapse){F.centerWidth-=F.rightCollapse.width();F.centerWidth-=parseInt(F.rightCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("right"));F.centerWidth-=B.space}else{F.centerWidth-=F.rightWidth;F.centerWidth-=parseInt(F.right.css("borderLeftWidth"));F.centerWidth-=parseInt(F.right.css("borderRightWidth"));F.centerWidth-=B.space}}F.centerLeft=0;if(F.left){if(F.isLeftCollapse){F.centerLeft+=F.leftCollapse.width();F.centerLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("left"));F.centerLeft+=B.space}else{F.centerLeft+=F.left.width();F.centerLeft+=parseInt(F.left.css("borderLeftWidth"));F.centerLeft+=parseInt(F.left.css("borderRightWidth"));F.centerLeft+=B.space}}F.center.css({left:F.centerLeft});F.center.width(F.centerWidth);F.center.height(F.middleHeight)}if(F.left){F.leftCollapse.height(F.middleHeight);F.left.height(F.middleHeight)}if(F.right){F.rightCollapse.height(F.middleHeight);F.right.height(F.middleHeight);F.rightLeft=0;if(F.left){if(F.isLeftCollapse){F.rightLeft+=F.leftCollapse.width();F.rightLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.rightLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.rightLeft+=B.space}else{F.rightLeft+=F.left.width();F.rightLeft+=parseInt(F.left.css("borderLeftWidth"));F.rightLeft+=parseInt(F.left.css("borderRightWidth"));F.rightLeft+=parseInt(F.left.css("left"));F.rightLeft+=B.space}}if(F.center){F.rightLeft+=F.center.width();F.rightLeft+=parseInt(F.center.css("borderLeftWidth"));F.rightLeft+=parseInt(F.center.css("borderRightWidth"));F.rightLeft+=B.space}F.right.css({left:F.rightLeft})}if(F.bottom){F.bottomTop=F.layoutHeight-F.bottom.height()-2;F.bottom.css({top:F.bottomTop})}F.setDropHandlePosition()},start:function(H,G){F.dragtype=H;if(H=="leftresize"||H=="rightresize"){F.xresize={startX:G.pageX};F.draggingyline.css({left:G.pageX-F.layout.offset().left,height:F.middleHeight,top:F.middleTop}).show();A("body").css("cursor","col-resize")}else{if(H=="topresize"||H=="bottomresize"){F.yresize={startY:G.pageY};F.draggingxline.css({top:G.pageY-F.layout.offset().top,width:F.layout.width()}).show();A("body").css("cursor","row-resize")}else{return}}F.layout.lock.width(F.layout.width());F.layout.lock.height(F.layout.height());F.layout.lock.show();if(A.browser.msie||A.browser.safari){A("body").bind("selectstart",function(){return false})}A(document).bind("mouseup",F.stop);A(document).bind("mousemove",F.drag)},drag:function(G){if(F.xresize){F.xresize.diff=G.pageX-F.xresize.startX;F.draggingyline.css({left:G.pageX-F.layout.offset().left});A("body").css("cursor","col-resize")}else{if(F.yresize){F.yresize.diff=G.pageY-F.yresize.startY;F.draggingxline.css({top:G.pageY-F.layout.offset().top});A("body").css("cursor","row-resize")}}},stop:function(G){if(F.xresize&&F.xresize.diff!=undefined){if(F.dragtype=="leftresize"){F.leftWidth+=F.xresize.diff;F.left.width(F.leftWidth);if(F.center){F.center.width(F.center.width()-F.xresize.diff).css({left:parseInt(F.center.css("left"))+F.xresize.diff})}else{if(F.right){F.right.width(F.left.width()-F.xresize.diff).css({left:parseInt(F.right.css("left"))+F.xresize.diff})}}}else{if(F.dragtype=="rightresize"){F.rightWidth-=F.xresize.diff;F.right.width(F.rightWidth).css({left:parseInt(F.right.css("left"))+F.xresize.diff});if(F.center){F.center.width(F.center.width()+F.xresize.diff)}else{if(F.left){F.left.width(F.left.width()+F.xresize.diff)}}}}}else{if(F.yresize&&F.yresize.diff!=undefined){if(F.dragtype=="topresize"){F.top.height(F.top.height()+F.yresize.diff);F.middleTop+=F.yresize.diff;F.middleHeight-=F.yresize.diff;if(F.left){F.left.css({top:F.middleTop}).height(F.middleHeight);F.leftCollapse.css({top:F.middleTop}).height(F.middleHeight)}if(F.center){F.center.css({top:F.middleTop}).height(F.middleHeight)}if(F.right){F.right.css({top:F.middleTop}).height(F.middleHeight);F.rightCollapse.css({top:F.middleTop}).height(F.middleHeight)}}else{if(F.dragtype=="bottomresize"){F.bottom.height(F.bottom.height()-F.yresize.diff);F.middleHeight+=F.yresize.diff;F.bottomTop+=F.yresize.diff;F.bottom.css({top:F.bottomTop});if(F.left){F.left.height(F.middleHeight);F.leftCollapse.height(F.middleHeight)}if(F.center){F.center.height(F.middleHeight)}if(F.right){F.right.height(F.middleHeight);F.rightCollapse.height(F.middleHeight)}}}}}F.setDropHandlePosition();F.draggingxline.hide();F.draggingyline.hide();F.xresize=F.yresize=F.dragtype=false;F.layout.lock.hide();if(A.browser.msie||A.browser.safari){A("body").unbind("selectstart")}A(document).unbind("mousemove",F.drag);A(document).unbind("mouseup",F.stop);A("body").css("cursor","")}};F.layout=A(this);if(!F.layout.hasClass("l-layout")){F.layout.addClass("l-layout")}F.width=F.layout.width();if(A("> div[position=top]",F.layout).length>0){F.top=A("> div[position=top]",F.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent();F.top.content=A("> div[position=top]",F.top);if(!F.top.content.hasClass("l-layout-content")){F.top.content.addClass("l-layout-content")}F.topHeight=B.topHeight;if(F.topHeight){F.top.height(F.topHeight)}}if(A("> div[position=bottom]",F.layout).length>0){F.bottom=A("> div[position=bottom]",F.layout).wrap('<div class="l-layout-bottom"></div>').parent();F.bottom.content=A("> div[position=bottom]",F.top);if(!F.bottom.content.hasClass("l-layout-content")){F.bottom.content.addClass("l-layout-content")}F.bottomHeight=B.bottomHeight;if(F.bottomHeight){F.bottom.height(F.bottomHeight)}}if(A("> div[position=left]",F.layout).length>0){F.left=A("> div[position=left]",F.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent();F.left.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.left.prepend(F.left.header);F.left.header.toggle=A(".l-layout-header-toggle",F.left.header);F.left.content=A("> div[position=left]",F.left);if(!F.left.content.hasClass("l-layout-content")){F.left.content.addClass("l-layout-content")}var D=F.left.content.attr("title");if(D){F.left.content.attr("title","");A(".l-layout-header-inner",F.left.header).html(D)}F.leftWidth=B.leftWidth;if(F.leftWidth){F.left.width(F.leftWidth)}}if(A("> div[position=center]",F.layout).length>0){F.center=A("> div[position=center]",F.layout).wrap('<div class="l-layout-center" ></div>').parent();F.center.content=A("> div[position=center]",F.center);if(!F.center.content.hasClass("l-layout-content")){F.center.content.addClass("l-layout-content")}var E=F.center.content.attr("title");if(E){F.center.content.attr("title","");F.center.header=A('<div class="l-layout-header"></div>');F.center.prepend(F.center.header);F.center.header.html(E)}F.centerWidth=B.centerWidth;if(F.centerWidth){F.center.width(F.centerWidth)}}if(A("> div[position=right]",F.layout).length>0){F.right=A("> div[position=right]",F.layout).wrap('<div class="l-layout-right"></div>').parent();F.right.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.right.prepend(F.right.header);F.right.header.toggle=A(".l-layout-header-toggle",F.right.header);F.right.content=A("> div[position=left]",F.right);if(!F.right.content.hasClass("l-layout-content")){F.right.content.addClass("l-layout-content")}var C=F.right.content.attr("title");if(C){F.right.content.attr("title","");A(".l-layout-header-inner",F.right.header).html(C)}F.rightWidth=B.rightWidth;if(F.rightWidth){F.right.width(F.rightWidth)}}F.layout.lock=A("<div class='l-layout-lock'></div>");F.layout.append(F.layout.lock);F.addDropHandle();F.isLeftCollapse=B.isLeftCollapse;F.isRightCollapse=B.isRightCollapse;F.leftCollapse=A('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>');F.rightCollapse=A('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>');F.layout.append(F.leftCollapse).append(F.rightCollapse);F.leftCollapse.toggle=A("> .l-layout-collapse-left-toggle",F.leftCollapse);F.rightCollapse.toggle=A("> .l-layout-collapse-right-toggle",F.rightCollapse);F.setCollapse();F.init();A(window).resize(function(){F.onResize()});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Layout"]=F;this.usedLayout=true})}})(jQuery);(function(A){A.ligerMessageBox={};A.ligerMessageBox.show=function(G){G=G||{};G.isDrag==undefined&&(G.isDrag=true);var E="";E+='<div class="l-messagebox">';E+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>';E+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ';E+='        <div class="l-messagebox-image"></div>';E+='        <div class="l-messagebox-title">';E+='            <div class="l-messagebox-title-inner"></div>';E+='            <div class="l-messagebox-close"></div>';E+="        </div>";E+='        <div class="l-messagebox-content">';E+="        </div>";E+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">';E+="        </div></div>";E+="    </div>";var H={applyWindowMask:function(){A(".l-window-mask").remove();A("<div class='l-window-mask' style='display: block;'></div>").appendTo(A("body"))},removeWindowMask:function(){A(".l-window-mask").remove()},applyDrag:function(){if(G.isDrag&&A.fn.ligerDrag){D.ligerDrag({handler:".l-messagebox-title"})}},setImage:function(){if(G.type){if(G.type=="success"||G.type=="donne"){A(".l-messagebox-image",D).addClass("l-messagebox-image-donne").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="error"){A(".l-messagebox-image",D).addClass("l-messagebox-image-error").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="warn"){A(".l-messagebox-image",D).addClass("l-messagebox-image-warn").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="question"){A(".l-messagebox-image",D).addClass("l-messagebox-image-question").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:40})}}}}}}};var D=A(E);A("body").append(D);D.close=function(){H.removeWindowMask();D.remove()};G.width&&D.width(G.width);G.title&&A(".l-messagebox-title-inner",D).html(G.title);G.content&&A(".l-messagebox-content",D).html(G.content);if(G.buttons){A(G.buttons).each(function(I,J){var K=A('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');A(".l-messagebox-btn-inner",K).html(J.text);A(".l-messagebox-buttons-inner",D).append(K);J.width&&K.width(J.width);J.onclick&&K.click(function(){J.onclick(J,I,D)})});A(".l-messagebox-buttons-inner",D).append("<div class='l-clear'></div>")}var F=D.width();var C=0;A(".l-messagebox-buttons-inner .l-messagebox-btn",D).each(function(){C+=A(this).width()});A(".l-messagebox-buttons-inner",D).css({marginLeft:parseInt((F-C)*0.5)});H.applyWindowMask();H.applyDrag();H.setImage();A(".l-messagebox-btn",D).hover(function(){A(this).addClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).addClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).addClass("l-messagebox-btn-r-over")},function(){A(this).removeClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).removeClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).removeClass("l-messagebox-btn-r-over")});A(".l-messagebox-close",D).hover(function(){A(this).addClass("l-messagebox-close-over")},function(){A(this).removeClass("l-messagebox-close-over")}).click(function(){D.close()})};A.ligerMessageBox.alert=function(C,F,D,E){C=C||"";F=F||C;var G={onclick:function(I,J,H){H.close();if(E){E(I,J,H)}}};p={title:C,content:F,buttons:[{text:"确定",onclick:G.onclick}]};if(D){p.type=D}A.ligerMessageBox.show(p)};A.ligerMessageBox.confirm=function(C,E,F){var D={onclick:function(H,I,G){G.close();if(F){F(I==0)}}};p={type:"question",title:C,content:E,buttons:[{text:"是",onclick:D.onclick},{text:"否",onclick:D.onclick}]};A.ligerMessageBox.show(p)};A.ligerMessageBox.success=function(C,E,D){A.ligerMessageBox.alert(C,E,"success",D)};A.ligerMessageBox.error=function(C,E,D){A.ligerMessageBox.alert(C,E,"error",D)};A.ligerMessageBox.warn=function(C,E,D){A.ligerMessageBox.alert(C,E,"warn",D)};A.ligerMessageBox.question=function(C,D){A.ligerMessageBox.alert(C,D,"question")};function B(){var D="../lib/ligerUI/skins/Aqua/images/";var C=["box/box-btn-done.gif","box/box-btn-error.gif","box/box-btn-l.gif","box/box-btn-l-over.gif","box/box-btn-question.gif","box/box-btn-over.gif","box/box-righttop.gif","box/box-lefttop.gif","box/box-top.gif","box/box-btn-r.gif","box/box-btn-r-over.gif","box/box-btn-warn.gif","box/box-close.gif","box/box-close-over.gif","box/tabs-item-left-bg.gif"];for(i=0;i<C.length;i++){new Image().src=D+C[i]}}})(jQuery);(function(A){A.fn.ligerNoSelect=function(B){if(B==null){prevent=true}else{prevent=B}if(prevent){return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).bind("selectstart",function(){return false})}else{if(A.browser.mozilla){A(this).css("MozUserSelect","none");A("body").trigger("focus")}else{if(A.browser.opera){A(this).bind("mousedown",function(){return false})}else{A(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).unbind("selectstart")}else{if(A.browser.mozilla){A(this).css("MozUserSelect","inherit")}else{if(A.browser.opera){A(this).unbind("mousedown")}else{A(this).removeAttr("unselectable","on")}}}})}}})(jQuery);(function(A){A.fn.ligerRadio=function(){return this.each(function(){if(this.usedRadio){return}if(A(this).hasClass("l-hidden")){return}var B={};B.input=A(this);B.link=A('<a href="javascript:void(0)" class="l-radio"></a>');B.wrapper=B.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent();B.wrapper.prepend(B.link);B.input.change(function(){if(this.checked){B.link.addClass("l-radio-checked")}else{B.link.removeClass("l-radio-checked")}return true});B.link.click(function(){if(B.input.attr("disabled")){return false}B.input.trigger("click").trigger("change");var C;if(B.input[0].form){C=B.input[0].form}else{C=document}A("input:radio[name="+B.input[0].name+"]",C).not(B.input).trigger("change");return false});B.wrapper.hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});this.checked&&B.link.addClass("l-radio-checked");this.usedRadio=true})}})(jQuery);(function(A){A.fn.ligerResizable=function(B){return this.each(function(){B=A.extend({},A.ligerDefaults.Resizable,B||{});var C={init:function(){C.target.append('<div class="l-resizable"></div>');var D=B.handles.split(",");for(var E=0;E<D.length;E++){switch(D[E].replace(/(^\s*)|(\s*$)/g,"")){case"nw":C.target.append('<div class="l-resizable-h-l" direction="nw"></div>');break;case"ne":C.target.append('<div class="l-resizable-h-r" direction="ne"></div>');break;case"n":C.target.append('<div class="l-resizable-h-c" direction="n"></div>');break;case"w":C.target.append('<div class="l-resizable-c-l" direction="w"></div>');break;case"e":C.target.append('<div class="l-resizable-c-r" direction="e"></div>');break;case"sw":C.target.append('<div class="l-resizable-f-l" direction="sw"></div>');break;case"se":C.target.append('<div class="l-resizable-f-r" direction="se"></div>');break;case"s":C.target.append('<div class="l-resizable-f-c" direction="s"></div>');break}}A("> .l-resizable-h-c , > .l-resizable-f-c",C.target).width(C.target.width());A("> .l-resizable-c-l , > .l-resizable-c-r",C.target).height(C.target.height());C.target.resizable=A("> .l-resizable",C.target)},start:function(E,D){if(A.browser.msie||A.browser.safari){A("body").bind("selectstart",function(){return false})}A(".l-window-mask-nobackground").remove();A("<div class='l-window-mask-nobackground' style='display: block;'></div>").appendTo(A("body"));C.target.resizable.css({width:C.target.width(),height:C.target.height(),left:0,top:0});C.current={dir:D,left:C.target.offset().left,top:C.target.offset().top,width:C.target.width(),height:C.target.height()};A(document).bind("mouseup",C.stop);A(document).bind("mousemove",C.drag);C.target.resizable.show();if(B.onStartResize){B.onStartResize(C.current,E)}},drag:function(J){var F=C.current.dir;var D=C.target.resizable[0];var G=C.current.width;var E=C.current.height;var I=(J.pageX||J.screenX)-C.current.left;var H=(J.pageY||J.clientY)-C.current.top;if(F.indexOf("e")>=0){I-=G}if(F.indexOf("s")>=0){H-=E}if(F!="n"&&F!="s"){G+=(F.indexOf("w")>=0)?-I:I}if(G>=B.minWidth){if(F.indexOf("w")>=0){D.style.left=I+"px"}if(F!="n"&&F!="s"){D.style.width=G+"px"}}if(F!="w"&&F!="e"){E+=(F.indexOf("n")>=0)?-H:H}if(E>=B.minHeight){if(F.indexOf("n")>=0){D.style.top=H+"px"}if(F!="w"&&F!="e"){D.style.height=E+"px"}}C.current.newWidth=G;C.current.newHeight=E;C.current.diffTop=parseInt(D.style.top);if(isNaN(C.current.diffTop)){C.current.diffTop=0}C.current.diffLeft=parseInt(D.style.left);if(isNaN(C.current.diffLeft)){C.current.diffLeft=0}A("body").css("cursor",F+"-resize");if(B.onResize){B.onResize(C.current,J)}},stop:function(D){if(A.browser.msie||A.browser.safari){A("body").unbind("selectstart")}A(".l-window-mask-nobackground").remove();if(!B.onStopResize){C.applyResize()}else{if(B.onStopResize(C.current,D)!=false){C.applyResize()}}A("body").css("cursor","");C.target.resizable.hide();A(document).unbind("mousemove",C.drag);A(document).unbind("mouseup",C.stop)},applyResize:function(){var D=0;var E=0;if(!isNaN(parseInt(C.target.css("top")))){D=parseInt(C.target.css("top"))}if(!isNaN(parseInt(C.target.css("left")))){E=parseInt(C.target.css("left"))}if(C.current.diffTop!=undefined){if(C.current.diffTop!=0){C.target.css({top:D+C.current.diffTop})}if(C.current.diffLeft!=0){C.target.css({left:E+C.current.diffLeft})}C.target.css({width:C.current.newWidth,height:C.current.newHeight})}}};C.target=A(this);C.init();A(">div",C.target).mousedown(function(D){if(!A(this).attr("direction")){return}C.start(D,A(this).attr("direction"));return false})})};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2000,maxHeight:2000,minWidth:20,minHeight:20,onStartResize:function(B){},onResize:function(B){},onStopResize:function(B){}}})(jQuery);(function(A){A.fn.ligerSpinner=function(B){B=B||{};B=A.extend({type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false},B);if(B.type=="float"){B.step=0.1;B.interval=50}else{if(B.type=="int"){B.step=1;B.interval=100}else{if(B.type=="time"){B.step=1;B.interval=100}}}return this.each(function(){if(this.useSpinner){return}var C={round:function(E,F){var D=1;for(;F>0;D*=10,F--){}for(;F<0;D/=10,F++){}return Math.round(E*D)/D},isInt:function(D){var E=B.isNegative?/^-?\d+$/:/^\d+$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isFloat:function(D){var E=B.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isTime:function(E){var D=E.match(/^(\d{1,2}):(\d{1,2})$/);if(D==null){return false}if(D[1]>24||D[2]>60){return false}return true},isVerify:function(D){if(B.type=="float"){return C.isFloat(D)}else{if(B.type=="int"){return C.isInt(D)}else{if(B.type=="time"){return C.isTime(D)}}}return false},getVerifyValue:function(E){var D=null;if(B.type=="float"){D=C.round(E,B.decimalplace)}else{if(B.type=="int"){D=parseInt(E)}else{if(B.type=="time"){D=E}}}if(!C.isVerify(D)){return C.value}else{return D}},getDefaultValue:function(){if(B.type=="float"||B.type=="int"){return 0}else{if(B.type=="time"){return"00:00"}}},addValue:function(E){var D=C.inputText.val();D=parseFloat(D)+E;C.inputText.val(D);C.inputText.trigger("change")},addTime:function(F){var D=C.inputText.val();var E=D.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(E[2])+F;if(newminute<10){newminute="0"+newminute}D=E[1]+":"+newminute;C.inputText.val(D);C.inputText.trigger("change")},uping:function(){if(B.type=="float"||B.type=="int"){C.addValue(B.step)}else{if(B.type=="time"){C.addTime(B.step)}}},downing:function(){if(B.type=="float"||B.type=="int"){C.addValue(-1*B.step)}else{if(B.type=="time"){C.addTime(-1*B.step)}}},isDateTime:function(E){var D=E.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(D==null){return false}var F=new Date(D[1],D[3]-1,D[4]);if(F=="NaN"){return false}return(F.getFullYear()==D[1]&&(F.getMonth()+1)==D[3]&&F.getDate()==D[4])},isLongDateTime:function(F){var E=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var D=F.match(E);if(D==null){return false}var G=new Date(D[1],D[3]-1,D[4],D[5],D[6]);if(G=="NaN"){return false}return(G.getFullYear()==D[1]&&(G.getMonth()+1)==D[3]&&G.getDate()==D[4]&&G.getHours()==D[5]&&G.getMinutes()==D[6])},interval:null,inputText:null,value:null,textFieldID:""};if(this.tagName.toLowerCase()=="input"&&this.type&&this.type=="text"){C.inputText=A(this);if(this.id){C.textFieldID=this.id}}else{C.inputText=A('<input type="text"/>');C.inputText.appendTo(A(this))}if(C.textFieldID==""&&B.textFieldID){C.textFieldID=B.textFieldID}C.link=A('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>');C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();C.wrapper.append(C.link).after(C.selectBox).after(C.valueField);C.link.up=A(".l-spinner-up",C.link);C.link.down=A(".l-spinner-down",C.link);if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-20})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2);C.link.height(B.height-4)}if(!C.isVerify(C.inputText.val())){C.value=C.getDefaultValue();C.inputText.val(C.value)}C.link.up.hover(function(){A(this).addClass("l-spinner-up-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-up-over")}).mousedown(function(){C.interval=setInterval(C.uping,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.link.down.hover(function(){A(this).addClass("l-spinner-down-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-down-over")}).mousedown(function(){C.interval=setInterval(C.downing,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.inputText.change(function(){var D=C.inputText.val();C.value=C.getVerifyValue(D);if(B.onChangeValue){B.onChangeValue(C.value)}C.inputText.val(C.value)});this.useSpinner=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetTabManager=function(){return LigerUIManagers[this[0].id+"_Tab"]};A.fn.ligerRemoveTabManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Tab"]=null})};A.fn.ligerTab=function(B){B=A.extend({height:null,heightDiff:0,changeHeightOnResize:false},B||{});return this.each(function(){if(this.usedTab){return}if(A(this).hasClass("l-hidden")){return}var D={setTabButton:function(){var E=0;A("li",D.tab.links.ul).each(function(){E+=A(this).width()+2});var F=D.tab.width();if(E>F){D.tab.links.append('<div class="l-tab-links-left"></div><div class="l-tab-links-right"></div>');D.setTabButtonEven();return true}else{D.tab.links.ul.animate({left:0});A(".l-tab-links-left,.l-tab-links-right",D.tab.links).remove();return false}},setTabButtonEven:function(){A(".l-tab-links-left",D.tab.links).hover(function(){A(this).addClass("l-tab-links-left-over")},function(){A(this).removeClass("l-tab-links-left-over")}).click(function(){D.moveToPrevTabItem()});A(".l-tab-links-right",D.tab.links).hover(function(){A(this).addClass("l-tab-links-right-over")},function(){A(this).removeClass("l-tab-links-right-over")}).click(function(){D.moveToNextTabItem()})},moveToPrevTabItem:function(){var H=A(".l-tab-links-left",D.tab.links).width();var E=new Array();A("li",D.tab.links).each(function(J,K){var I=-1*H;if(J>0){I=parseInt(E[J-1])+A(this).prev().width()+2}E.push(I)});var G=-1*parseInt(D.tab.links.ul.css("left"));for(var F=0;F<E.length-1;F++){if(E[F]<G&&E[F+1]>=G){D.tab.links.ul.animate({left:-1*parseInt(E[F])});return}}},moveToNextTabItem:function(){var G=A(".l-tab-links-right",D.tab).width();var L=0;var J=A("li",D.tab.links.ul);J.each(function(){L+=A(this).width()+2});var H=D.tab.width();var K=new Array();for(var E=J.length-1;E>=0;E--){var F=L-H+G+2;if(E!=J.length-1){F=parseInt(K[J.length-2-E])-A(J[E+1]).width()-2}K.push(F)}var I=-1*parseInt(D.tab.links.ul.css("left"));for(var E=1;E<K.length;E++){if(K[E]<=I&&K[E-1]>I){D.tab.links.ul.animate({left:-1*parseInt(K[E-1])});return}}},selectTabItem:function(E){D.selectedTabId=E;A("> .l-tab-content-item[tabid="+E+"]",D.tab.content).show().siblings().hide();A("li[tabid="+E+"]",D.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected")},moveToLastTabItem:function(){var E=0;A("li",D.tab.links.ul).each(function(){E+=A(this).width()+2});var F=D.tab.width();if(E>F){var G=A(".l-tab-links-right",D.tab.links).width();D.tab.links.ul.animate({left:-1*(E-F+G+2)})}},isTabItemExist:function(E){return A("li[tabid="+E+"]",D.tab.links.ul).length>0},addTabItem:function(E){var F=E.tabid;if(F==undefined){F=D.getNewTabid()}var I=E.url;var K=E.text;var H=E.showClose;var J=E.height;if(D.isTabItemExist(F)){D.selectTabItem(F);return}var L=A("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>");var M=A("<div class='l-tab-content-item'><iframe frameborder='0'></iframe></div>");if(D.makeFullHeight){var G=D.tab.height()-D.tab.links.height();M.height(G)}L.attr("tabid",F);M.attr("tabid",F);A("iframe",M).attr("name",F);if(H==undefined){H=true}if(H==false){A(".l-tab-links-item-close",L).remove()}if(K==undefined){K=F}if(J){M.height(J)}A("a",L).text(K);A("iframe",M).attr("src",I);D.tab.links.ul.append(L);D.tab.content.append(M);D.selectTabItem(F);if(D.setTabButton()){D.moveToLastTabItem()}D.addTabItemEvent(L)},addTabItemEvent:function(E){E.click(function(){var F=A(this).attr("tabid");D.selectTabItem(F)});A(".l-tab-links-item-close",E).hover(function(){A(this).addClass("l-tab-links-item-close-over")},function(){A(this).removeClass("l-tab-links-item-close-over")}).click(function(){var F=A(this).parent().attr("tabid");D.removeTabItem(F)})},removeTabItem:function(E){var F=A("li[tabid="+E+"]",D.tab.links.ul).hasClass("l-selected");if(F){A(".l-tab-content-item[tabid="+E+"]",D.tab.content).prev().show();A("li[tabid="+E+"]",D.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")}A(".l-tab-content-item[tabid="+E+"]",D.tab.content).remove();A("li[tabid="+E+"]",D.tab.links.ul).remove();D.setTabButton()},addHeight:function(E){var F=D.tab.height()+E;D.setHeight(F)},setHeight:function(E){D.tab.height(E);D.setContentHeight()},setContentHeight:function(){var E=D.tab.height()-D.tab.links.height();D.tab.content.height(E);A("> .l-tab-content-item",D.tab.content).height(E)},getNewTabid:function(){var E=new Date();return E.getTime()},onResize:function(){if(!B.height||typeof(B.height)!="string"||B.height.indexOf("%")==-1){return false}if(D.tab.parent()[0].tagName.toLowerCase()=="body"){var E=A(window).height();E-=parseInt(D.tab.parent().css("paddingTop"));E-=parseInt(D.tab.parent().css("paddingBottom"));D.height=B.heightDiff+E*parseFloat(D.height)*0.01}else{D.height=B.heightDiff+(D.tab.parent().height()*parseFloat(B.height)*0.01)}D.tab.height(D.height);D.setContentHeight()}};if(B.height){D.makeFullHeight=true}D.tab=A(this);if(!D.tab.hasClass("l-tab")){D.tab.addClass("l-tab")}D.tab.content=A('<div class="l-tab-content"></div>');A("> div",D.tab).appendTo(D.tab.content);D.tab.content.appendTo(D.tab);D.tab.links=A('<div class="l-tab-links"><ul style="left: 0px; "></ul></div>');D.tab.links.prependTo(D.tab);D.tab.links.ul=A("ul",D.tab.links);var C=A("> div[lselected=true]",D.tab.content).length>0;D.selectedTabId=A("> div[lselected=true]",D.tab.content).attr("tabid");A("> div",D.tab.content).each(function(I,H){var E=A('<li class=""><a></a><div class="l-tab-links-item-left"></div><div class="l-tab-links-item-right"></div></li>');if(A(H).attr("title")){A("> a",E).html(A(H).attr("title"))}var G=A(H).attr("tabid");if(G==undefined){G=D.getNewTabid();A(H).attr("tabid",G);if(A(H).attr("lselected")){D.selectedTabId=G}}E.attr("tabid",G);if(!C&&I==0){D.selectedTabId=G}var F=A(H).attr("showClose");if(F){E.append("<div class='l-tab-links-item-close'></div>")}A("> ul",D.tab.links).append(E);if(!A(H).hasClass("l-tab-content-item")){A(H).addClass("l-tab-content-item")}});D.selectTabItem(D.selectedTabId);if(B.height){if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){D.onResize();if(B.changeHeightOnResize){A(window).resize(function(){D.onResize()})}}else{D.setHeight(B.height)}}if(D.makeFullHeight){D.setContentHeight()}A("li",D.tab.links).each(function(){D.addTabItemEvent(A(this))});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Tab"]=D;this.usedTab=true})}})(jQuery);(function(A){A.fn.ligerTextBox=function(B){return this.each(function(){B=B||{};B=A.extend({onBeforeInput:false,onInputed:false,onChangeValue:false,selectedText:false,selectedValue:false,width:false,nullText:null},B);if(this.manager){return}var C={};C.inputText=A(this);C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(!B.width){if(C.inputText.attr("lwidth")){B.width=parseInt(C.inputText.attr("lwidth"))}}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-2})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2)}C.nullText=B.nullText;if(C.nullText==null){if(C.inputText.attr("nulltext")){C.nullText=C.inputText.attr("nulltext")}}if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}C.inputText.blur(function(){if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}else{A(this).removeClass("l-text-field-null")}}).focus(function(){if(A(this).hasClass("l-text-field-null")){this.value="";A(this).removeClass("l-text-field-null")}}).change(function(){if(B.onChangeValue){B.onChangeValue(this.value)}})})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetTreeManager=function(){return LigerUIManagers[this[0].id+"_Tree"]};A.fn.ligerRemoveTreeManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Tree"]=null})};A.fn.ligerTree=function(B){return this.each(function(){B=A.extend({url:null,data:null,checkbox:true,autoCheckboxEven:true,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],nodeWidth:70,onBeforeExpand:null,onExpand:null,onBeforeCollapse:null,onCollapse:null,onBeforeSelect:null,onSelect:null,onBeforeCancelSelect:null,onCancelselect:null,onCheck:null,onSuccess:null,onError:null,onClick:null},B||{});if(this.usedTree){return}if(A(this).hasClass("l-hidden")){return}var D={getData:function(){return D.data},hasChildren:function(E){return A("> ul",E).length>0},getParentTreeItem:function(F,I){var G=A(F);if(G.parent().hasClass("l-tree")){return null}if(I==undefined){if(G.parent().parent("li").length==0){return null}return G.parent().parent("li")[0]}var E=parseInt(G.attr("outlinelevel"));var H=G;for(var J=E-1;J>=I;J--){H=H.parent().parent("li")}return H[0]},getChecked:function(){if(!B.checkbox){return null}var E=[];A(".l-checkbox-checked",D.tree).parent().parent("li").each(function(){var F=parseInt(A(this).attr("treedataindex"));E.push({target:this,data:C.getDataNodeByTreeDataIndex(D.data,F)})});return E},getSelected:function(){var F={};F.target=A(".l-selected",D.tree).parent("li")[0];if(F.target){var E=parseInt(A(F.target).attr("treedataindex"));F.data=C.getDataNodeByTreeDataIndex(D.data,E);return F}return null},upgrade:function(E){A(".l-note",E).each(function(){A(this).removeClass("l-note").addClass("l-expandable-open")});A(".l-note-last",E).each(function(){A(this).removeClass("l-note-last").addClass("l-expandable-open")});A("."+C.getChildNodeClassName(),E).each(function(){A(this).removeClass(C.getChildNodeClassName()).addClass(C.getParentNodeClassName(true))})},demotion:function(F){if(!F&&F[0].tagName.toLowerCase()!="li"){return}var E=A(F).hasClass("l-last");A(".l-expandable-open",F).each(function(){A(this).removeClass("l-expandable-open").addClass(E?"l-note-last":"l-note")});A(".l-expandable-close",F).each(function(){A(this).removeClass("l-expandable-close").addClass(E?"l-note-last":"l-note")});A("."+C.getParentNodeClassName(true),F).each(function(){A(this).removeClass(C.getParentNodeClassName(true)).addClass(C.getChildNodeClassName())})},collapseAll:function(){A(".l-expandable-open",D.tree).click()},expandAll:function(){A(".l-expandable-close",D.tree).click()},loadData:function(G,F,E){D.loading.show();E=E||{};A.ajax({type:"post",url:F,data:E,dataType:"json",success:function(H){D.loading.hide();D.append(G,H);if(B.onSuccess){B.onSuccess(H)}},error:function(I,H,J){try{D.loading.hide();if(B.onError){B.onError(I,H,J)}}catch(K){}}})},clear:function(){A("> li",D.tree).each(function(){D.remove(this)})},remove:function(E){var H=parseInt(A(E).attr("treedataindex"));var F=C.getDataNodeByTreeDataIndex(D.data,H);if(F){C.setTreeDataStatus([F],"delete")}var I=D.getParentTreeItem(E);if(B.checkbox){A(".l-checkbox",E).remove();C.setParentCheckboxStatus(A(E))}A(E).remove();if(I==null){I=D.tree.parent()}var G=A("> ul > li",I).length;if(G>0){A("> ul > li",I).each(function(J,K){if(J==0&&!A(this).hasClass("l-first")){A(this).addClass("l-first")}if(J==G-1&&!A(this).hasClass("l-last")){A(this).addClass("l-last")}if(J==0&&J==G-1&&!A(this).hasClass("l-onlychild")){A(this).addClass("l-onlychild")}A("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(J==G-1?"l-note-last":"l-note");C.setTreeItem(this,{isLast:J==G-1})})}else{}},append:function(J,H){if(!H||!H.length){return false}C.addTreeDataIndexToData(H);C.setTreeDataStatus(H,"add");C.appendData(J,H);data=H;if(!J){if(A("> li:last",D.tree).length>0){C.setTreeItem(A("> li:last",D.tree)[0],{isLast:false})}var E=A("> li",D.tree).length;A("> li",A(C.getTreeHTML(data))).appendTo(D.tree);var G=A("> li",D.tree).length;A("> li",D.tree).each(function(L,M){if(L<=E-1){return}C.initTreeItem(A(this),1,L==0,L==G-1)});return}var I=A(J);var F=parseInt(I.attr("outlinelevel"));var K=A("> ul",I).length>0;if(!K){I.append("<ul class='l-children'></ul>");D.upgrade(J)}if(A("> .l-children > li:last",I).length>0){C.setTreeItem(A("> .l-children > li:last",I)[0],{isLast:false})}var E=A("> ul > li",I).length;A("> li",A(C.getTreeHTML(data))).appendTo(A("> ul",I));var G=A("> ul > li",I).length;A("> ul > li",I).each(function(L,M){if(L<=E-1){return}C.initTreeItem(A(this),F+1,L==0,L==G-1)});C.upadteTreeWidth()}};var C={getDataNodeByTreeDataIndex:function(H,G){for(var E=0;E<H.length;E++){if(H[E].treedataindex==G){return H[E]}if(H[E].children){var F=C.getDataNodeByTreeDataIndex(H[E].children,G);if(F){return F}}}return null},setTreeDataStatus:function(F,E){A(F).each(function(){this.__status=E;if(this.children){C.setTreeDataStatus(this.children,E)}})},addTreeDataIndexToData:function(E){A(E).each(function(){if(this.treedataindex!=undefined){return}this.treedataindex=D.treedataindex++;if(this.children){C.addTreeDataIndexToData(this.children)}})},appendData:function(E,H){var G=parseInt(A(E).attr("treedataindex"));var F=C.getDataNodeByTreeDataIndex(D.data,G);if(D.treedataindex==undefined){D.treedataindex=0}if(F&&F.children==undefined){F.children=[]}A(H).each(function(I,J){if(F){F.children[F.children.length]=A.extend({},J)}else{D.data[D.data.length]=A.extend({},J)}})},setTreeItem:function(F,H){if(!H){return}var G=A(F);var E=parseInt(G.attr("outlinelevel"));if(H.isLast!=undefined){if(H.isLast==true){G.removeClass("l-last").addClass("l-last");A("> div .l-note",G).removeClass("l-note").addClass("l-note-last");A(".l-children li",G).find(".l-box:eq("+(E-1)+")").removeClass("l-line")}else{if(H.isLast==false){G.removeClass("l-last");A("> div .l-note-last",G).removeClass("l-note-last").addClass("l-note");A(".l-children li",G).find(".l-box:eq("+(E-1)+")").removeClass("l-line").addClass("l-line")}}}},getTreeHTML:function(H){var E="<ul class='l-children'>";for(var F=0;F<H.length;F++){E+="<li ";if(H[F].treedataindex!=undefined){E+='treedataindex="'+H[F].treedataindex+'" '}if(H[F].isexpand!=undefined){E+="isexpand="+H[F].isexpand+" "}for(var G=0;G<B.attribute.length;G++){if(H[F][B.attribute[G]]){E+=B.attribute[G]+'="'+H[F][B.attribute[G]]+'" '}}E+=">";E+="<span>"+H[F].text+"</span>";if(H[F].children){E+=C.getTreeHTML(H[F].children)}E+="</li>"}E+="</ul>";return E},upadteTreeWidth:function(){if(!D.maxOutlineLevel){D.maxOutlineLevel=1}var E=D.maxOutlineLevel*22;if(B.checkbox){E+=22}if(B.parentIcon||B.childIcon){E+=22}E+=B.nodeWidth;D.tree.width(E)},getChildNodeClassName:function(){return"l-tree-icon-"+B.childIcon},getParentNodeClassName:function(E){var F="l-tree-icon-"+B.parentIcon;if(E){F+="-open"}return F},applyTree:function(){var E=A("> li",D.tree).length;if(E==0){return}A("> li",D.tree).each(function(H,I){var G=D.data.length;D.data[G]={text:A("> span,> a",this).text(),treedataindex:D.treedataindex++};for(var F=0;F<B.attribute.length;F++){if(A(this).attr(B.attribute[F])){D.data[G][B.attribute[F]]=A(this).attr(B.attribute[F])}}C.initTreeItem(A(this),1,H==0,H==E-1,D.data[G])});C.upadteTreeWidth()},applyTreeEven:function(E){A("> .l-body",E).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})},setTreeEven:function(){D.tree.click(function(H){var I=(H.target||H.srcElement);var F=null;if(I.tagName.toLowerCase()=="a"||I.tagName.toLowerCase()=="span"||A(I).hasClass("l-box")){F=A(I).parent().parent()}else{if(A(I).hasClass("l-body")){F=A(I).parent()}else{F=A(I)}}if(!F){return}var G=parseInt(F.attr("treedataindex"));var E=C.getDataNodeByTreeDataIndex(D.data,G);if(!A(I).hasClass("l-expandable-open")&&!A(I).hasClass("l-expandable-close")){if(A(">div:first",F).hasClass("l-selected")){if(B.onBeforeCancelSelect&&B.onBeforeCancelSelect({data:E,target:F[0]})==false){return false}A(">div:first",F).removeClass("l-selected");B.onCancelSelect&&B.onCancelSelect({data:E,target:F[0]})}else{if(B.onBeforeSelect&&B.onBeforeSelect({data:E,target:F[0]})==false){return false}A(".l-body",D.tree).removeClass("l-selected");A(">div:first",F).addClass("l-selected");B.onSelect&&B.onSelect({data:E,target:F[0]})}}if(A(I).hasClass("l-expandable-open")){if(B.onBeforeCollapse&&B.onBeforeCollapse({data:E,target:F[0]})==false){return false}A(I).removeClass("l-expandable-open").addClass("l-expandable-close");A("> .l-children",F).slideToggle("fast");A("> div ."+C.getParentNodeClassName(true),F).removeClass(C.getParentNodeClassName(true)).addClass(C.getParentNodeClassName());B.onCollapse&&B.onCollapse({data:E,target:F[0]})}else{if(A(I).hasClass("l-expandable-close")){if(B.onBeforeExpand&&B.onBeforeExpand({data:E,target:F[0]})==false){return false}A(I).removeClass("l-expandable-close").addClass("l-expandable-open");A("> .l-children",F).slideToggle("fast",function(){B.onExpand&&B.onExpand({data:E,target:F[0]})});A("> div ."+C.getParentNodeClassName(),F).removeClass(C.getParentNodeClassName()).addClass(C.getParentNodeClassName(true))}else{if(A(I).hasClass("l-checkbox")&&B.autoCheckboxEven){if(A(I).hasClass("l-checkbox-unchecked")){A(I).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");B.onCheck&&B.onCheck({data:E,target:F[0]},true)}else{if(A(I).hasClass("l-checkbox-checked")){A(I).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked");B.onCheck&&B.onCheck({data:E,target:F[0]},false)}else{if(A(I).hasClass("l-checkbox-incomplete")){A(I).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");B.onCheck&&B.onCheck({data:E,target:F[0]},true)}}}C.setParentCheckboxStatus(F)}}}B.onClick&&B.onClick({data:E,target:F[0]})})},setParentCheckboxStatus:function(G){var F=A(".l-checkbox-unchecked",G.parent()).length==0;var E=A(".l-checkbox-checked",G.parent()).length==0;if(F){G.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked")}else{if(E){G.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked")}else{G.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete")}}if(G.parent().parent("li").length>0){C.setParentCheckboxStatus(G.parent().parent("li"))}},initTreeItem:function(F,E,G,M,I){if(F.attr("outlinelevel")){return}if(!D.maxOutlineLevel||D.maxOutlineLevel<E){D.maxOutlineLevel=E}F.attr("outlinelevel",E);if(I&&I.treedataindex!=undefined&&!F.attr("treedataindex")){F.attr("treedataindex",I.treedataindex)}var H=F.attr("isexpand");if(G&&!F.hasClass("l-first")){F.addClass("l-first")}if(M&&!F.hasClass("l-last")){F.addClass("l-last")}if(G&&M&&!F.hasClass("l-onlychild")){F.addClass("l-onlychild")}A("> span,> a",F).wrap("<div></div>");if(!A("> div",F).hasClass("l-body")){A("> div",F).addClass("l-body")}if(D.hasChildren(F[0])){if(B.parentIcon){A("> div",F).prepend('<div class="l-box '+C.getParentNodeClassName(true)+'"></div>')}if(B.checkbox){A("> div",F).prepend('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')}A("> div",F).prepend('<div class="l-box l-expandable-open"></div>');var K=A("> ul > li",F).length;if(!A("> ul",F).hasClass("l-children")){A("> ul",F).addClass("l-children")}if(I&&I.children==undefined){I.children=[]}A("> ul > li",F).each(function(P,Q){if(I){var O=I.children.length;I.children[O]={text:A("> span,> a",this).text(),treedataindex:D.treedataindex++};for(var N=0;N<B.attribute.length;N++){if(A(this).attr(B.attribute[N])){I.children[O][B.attribute[N]]=A(this).attr(B.attribute[N])}}C.initTreeItem(A(this),E+1,P==0,P==K-1,I.children[O])}else{C.initTreeItem(A(this),E+1,P==0,P==K-1)}})}else{if(B.childIcon){A("> div",F).prepend('<div class="l-box '+C.getChildNodeClassName()+'"></div>')}if(B.checkbox){A("> div",F).prepend('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')}if(M){A("> div",F).prepend('<div class="l-box l-note-last"></div>')}else{A("> div",F).prepend('<div class="l-box l-note"></div>')}}for(var L=E-1;L>=1;L--){var J=A(D.getParentTreeItem(F[0],L));if(J.hasClass("l-last")){A("> div",F).prepend('<div class="l-box"></div>')}else{A("> div",F).prepend('<div class="l-box l-line"></div>')}}if(D.hasChildren(F[0])&&H!=undefined&&(H=="false"||H==false)){A("> div .l-expandable-open",F).removeClass("l-expandable-open").addClass("l-expandable-close");A("> .l-children",F).hide();A("> div ."+C.getParentNodeClassName(true),F).removeClass(C.getParentNodeClassName(true)).addClass(C.getParentNodeClassName())}if(A(F).hasClass("l-expandable-open")){A("> .l-children",F).show()}else{if(A(this).hasClass("l-expandable-close")){A("> .l-children",F).hide()}}C.applyTreeEven(F[0])}};if(!A(this).hasClass("l-tree")){A(this).addClass("l-tree")}D.tree=A(this);D.loading=A("<div class='l-tree-loading'></div>");D.tree.after(D.loading);D.data=[];D.treedataindex=0;C.applyTree();C.setTreeEven();if(B.data){D.append(null,B.data)}if(B.url){D.loadData(null,B.url)}if(this.id==undefined||this.id==""){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Tree"]=D;this.usedTree=true})}})(jQuery);(function(A){A.fn.ligerApplyWindow=function(B){return this.each(function(){B=A.extend({showClose:true,showMax:true,showToggle:true},B||{});var C={};C.window=A('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>');C.window.content=A(".l-window-content",C.window);C.window.header=A(".l-window-header",C.window);A(this).appendTo(C.window.content);A.ligerWindow.switchWindow(C.window[0]);A("body").append(C.window);B.left&&C.window.css("left",B.left);B.right&&C.window.css("right",B.right);B.top&&C.window.css("top",B.top);B.bottom&&C.window.css("bottom",B.bottom);B.width&&C.window.width(B.width);B.height&&C.window.content.height(B.height-28);B.title&&A(".l-window-header-inner",C.window.header).html(B.title);B.framename&&A(">iframe",C.window.content).attr("name",B.framename);if(!B.showToggle){A(".l-window-toggle",C.window).remove()}if(!B.showMax){A(".l-window-max",C.window).remove()}if(!B.showClose){A(".l-window-close",C.window).remove()}if(A.fn.ligerDrag){C.window.ligerDrag({handler:".l-window-header",onStartDrag:function(){A.ligerWindow.switchWindow(C.window[0]);C.window.addClass("l-window-dragging");C.window.content.children().hide()},onStopDrag:function(){C.window.removeClass("l-window-dragging");C.window.content.children().show()}})}if(A.fn.ligerResizable){C.window.ligerResizable({onStartResize:function(){A.ligerWindow.switchWindow(C.window[0]);if(A(".l-window-max",C.window).hasClass("l-window-regain")){A(".l-window-max",C.window).removeClass("l-window-regain")}},onStopResize:function(D,G){var E=0;var F=0;if(!isNaN(parseInt(C.window.css("top")))){E=parseInt(C.window.css("top"))}if(!isNaN(parseInt(C.window.css("left")))){F=parseInt(C.window.css("left"))}if(D.diffTop!=undefined){C.window.css({top:E+D.diffTop,left:F+D.diffLeft,width:D.newWidth});C.window.content.height(D.newHeight-28)}return false}});C.window.append("<div class='l-btn-nw-drop'></div>")}A(".l-window-toggle",C.window).click(function(){if(A(this).hasClass("l-window-toggle-close")){A(this).removeClass("l-window-toggle-close")}else{A(this).addClass("l-window-toggle-close")}C.window.content.slideToggle()});A(".l-window-close",C.window).click(function(){if(B.onClose&&B.onClose()==false){return false}C.window.hide()});A(".l-window-max",C.window).click(function(){if(A(this).hasClass("l-window-regain")){if(B.onRegain&&B.onRegain()==false){return false}C.window.width(C.lastWindowWidth).css({left:C.lastWindowLeft,top:C.lastWindowTop});C.window.content.height(C.lastWindowHeight-28);A(this).removeClass("l-window-regain")}else{if(B.onMax&&B.onMax()==false){return false}C.lastWindowWidth=C.window.width();C.lastWindowHeight=C.window.height();C.lastWindowLeft=C.window.css("left");C.lastWindowTop=C.window.css("top");C.window.width(A(window).width()-2).css({left:0,top:0});C.window.content.height(A(window).height()-28);A(this).addClass("l-window-regain")}})})};A.ligerWindow={};A.ligerWindow.switchWindow=function(B){A(B).css("z-index","101").siblings(".l-window").css("z-index","100")};A.ligerWindow.show=function(E){E=E||{};if(E.url){var C=A("<iframe frameborder='0' src='"+E.url+"'></iframe>");var D="window"+new Date().getTime();if(E.name){D=E.name}C.attr("name",D);E.framename=D;C.ligerApplyWindow(A.extend({},E))}else{if(E.content){var B=A("<div>"+E.content+"</div>");B.ligerApplyWindow(A.extend({},E))}else{if(E.target){E.target.ligerApplyWindow(A.extend({},E))}}}}})(jQuery);