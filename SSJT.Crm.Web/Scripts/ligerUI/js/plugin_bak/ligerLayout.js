if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetLayoutManager=function(){return LigerUIManagers[this[0].id+"_Layout"]};A.fn.ligerRemoveLayoutManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Layout"]=null})};A.fn.ligerLayout=function(B){return this.each(function(){B=A.extend({topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,onHeightChanged:null,isLeftCollapse:false,isRightCollapse:false,space:3},B||{});if(this.usedLayout){return}var F={init:function(){A("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",F.layout).hover(function(){A(this).addClass("l-layout-header-over")},function(){A(this).removeClass("l-layout-header-over")});A(".l-layout-header-toggle",F.layout).hover(function(){A(this).addClass("l-layout-header-toggle-over")},function(){A(this).removeClass("l-layout-header-toggle-over")});A(".l-layout-header-toggle",F.left).click(function(){F.setLeftCollapse(true)});A(".l-layout-header-toggle",F.right).click(function(){F.setRightCollapse(true)});F.middleTop=0;if(F.top){F.middleTop+=F.top.height();F.middleTop+=parseInt(F.top.css("borderTopWidth"));F.middleTop+=parseInt(F.top.css("borderBottomWidth"));F.middleTop+=B.space}if(F.left){F.left.css({top:F.middleTop});F.leftCollapse.css({top:F.middleTop})}if(F.center){F.center.css({top:F.middleTop})}if(F.right){F.right.css({top:F.middleTop});F.rightCollapse.css({top:F.middleTop})}if(F.left){F.left.css({left:0})}F.onResize();F.onResize()},setCollapse:function(){F.leftCollapse.hover(function(){A(this).addClass("l-layout-collapse-left-over")},function(){A(this).removeClass("l-layout-collapse-left-over")});F.leftCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-left-toggle-over")},function(){A(this).removeClass("l-layout-collapse-left-toggle-over")});F.rightCollapse.hover(function(){A(this).addClass("l-layout-collapse-right-over")},function(){A(this).removeClass("l-layout-collapse-right-over")});F.rightCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-right-toggle-over")},function(){A(this).removeClass("l-layout-collapse-right-toggle-over")});F.leftCollapse.toggle.click(function(){F.setLeftCollapse(false)});F.rightCollapse.toggle.click(function(){F.setRightCollapse(false)});if(F.left&&F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle.hide();F.left.hide()}if(F.right&&F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle.hide();F.right.hide()}},setLeftCollapse:function(G){if(!F.left){return false}F.isLeftCollapse=G;if(F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle.hide();F.left.hide()}else{F.leftCollapse.hide();F.leftDropHandle.show();F.left.show()}F.onResize()},setRightCollapse:function(G){if(!F.right){return false}F.isRightCollapse=G;F.onResize();if(F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle.hide();F.right.hide()}else{F.rightCollapse.hide();F.rightDropHandle.show();F.right.show()}F.onResize()},addDropHandle:function(){if(F.left){F.leftDropHandle=A("<div class='l-layout-drophandle-left'></div>");F.layout.append(F.leftDropHandle);F.leftDropHandle.show();F.leftDropHandle.mousedown(function(G){F.start("leftresize",G)})}if(F.right){F.rightDropHandle=A("<div class='l-layout-drophandle-right'></div>");F.layout.append(F.rightDropHandle);F.rightDropHandle.show();F.rightDropHandle.mousedown(function(G){F.start("rightresize",G)})}if(F.top){F.topDropHandle=A("<div class='l-layout-drophandle-top'></div>");F.layout.append(F.topDropHandle);F.topDropHandle.show();F.topDropHandle.mousedown(function(G){F.start("topresize",G)})}if(F.bottom){F.bottomDropHandle=A("<div class='l-layout-drophandle-bottom'></div>");F.layout.append(F.bottomDropHandle);F.bottomDropHandle.show();F.bottomDropHandle.mousedown(function(G){F.start("bottomresize",G)})}F.draggingxline=A("<div class='l-layout-dragging-xline'></div>");F.draggingyline=A("<div class='l-layout-dragging-yline'></div>");F.layout.append(F.draggingxline).append(F.draggingyline)},setDropHandlePosition:function(){if(F.leftDropHandle){F.leftDropHandle.css({left:F.left.width()+parseInt(F.left.css("left")),height:F.middleHeight,top:F.middleTop})}if(F.rightDropHandle){F.rightDropHandle.css({left:parseInt(F.right.css("left"))-B.space,height:F.middleHeight,top:F.middleTop})}if(F.topDropHandle){F.topDropHandle.css({top:F.top.height()+parseInt(F.top.css("top")),width:F.top.width()})}if(F.bottomDropHandle){F.bottomDropHandle.css({top:parseInt(F.bottom.css("top"))-B.space,width:F.bottom.width()})}},onResize:function(){var H=F.layout.height();if(B.height){if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){if(F.layout.parent()[0].tagName.toLowerCase()=="body"){var G=A(window).height();G-=parseInt(F.layout.parent().css("paddingTop"));G-=parseInt(F.layout.parent().css("paddingBottom"));F.layout.height(G*parseFloat(B.height)*0.01)}else{F.layout.height((F.layout.parent().height()*parseFloat(B.height)*0.01))}}else{F.layout.height(B.height)}}F.layoutHeight=F.layout.height();F.middleWidth=F.layout.width();F.middleHeight=F.layout.height();if(F.top){F.middleHeight-=F.top.height();F.middleHeight-=parseInt(F.top.css("borderTopWidth"));F.middleHeight-=parseInt(F.top.css("borderBottomWidth"));F.middleHeight-=B.space}if(F.bottom){F.middleHeight-=F.bottom.height();F.middleHeight-=parseInt(F.bottom.css("borderTopWidth"));F.middleHeight-=parseInt(F.bottom.css("borderBottomWidth"));F.middleHeight-=B.space}F.middleHeight-=2;if(B.onHeightChanged&&F.layoutHeight!=H){B.onHeightChanged({layoutHeight:F.layoutHeight,diff:F.layoutHeight-H,middleHeight:F.middleHeight})}if(F.center){F.centerWidth=F.middleWidth;if(F.left){if(F.isLeftCollapse){F.centerWidth-=F.leftCollapse.width();F.centerWidth-=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("left"));F.centerWidth-=B.space}else{F.centerWidth-=F.leftWidth;F.centerWidth-=parseInt(F.left.css("borderLeftWidth"));F.centerWidth-=parseInt(F.left.css("borderRightWidth"));F.centerWidth-=parseInt(F.left.css("left"));F.centerWidth-=B.space}}if(F.right){if(F.isRightCollapse){F.centerWidth-=F.rightCollapse.width();F.centerWidth-=parseInt(F.rightCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("right"));F.centerWidth-=B.space}else{F.centerWidth-=F.rightWidth;F.centerWidth-=parseInt(F.right.css("borderLeftWidth"));F.centerWidth-=parseInt(F.right.css("borderRightWidth"));F.centerWidth-=B.space}}F.centerLeft=0;if(F.left){if(F.isLeftCollapse){F.centerLeft+=F.leftCollapse.width();F.centerLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("left"));F.centerLeft+=B.space}else{F.centerLeft+=F.left.width();F.centerLeft+=parseInt(F.left.css("borderLeftWidth"));F.centerLeft+=parseInt(F.left.css("borderRightWidth"));F.centerLeft+=B.space}}F.center.css({left:F.centerLeft});F.center.width(F.centerWidth);F.center.height(F.middleHeight)}if(F.left){F.leftCollapse.height(F.middleHeight);F.left.height(F.middleHeight)}if(F.right){F.rightCollapse.height(F.middleHeight);F.right.height(F.middleHeight);F.rightLeft=0;if(F.left){if(F.isLeftCollapse){F.rightLeft+=F.leftCollapse.width();F.rightLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.rightLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.rightLeft+=B.space}else{F.rightLeft+=F.left.width();F.rightLeft+=parseInt(F.left.css("borderLeftWidth"));F.rightLeft+=parseInt(F.left.css("borderRightWidth"));F.rightLeft+=parseInt(F.left.css("left"));F.rightLeft+=B.space}}if(F.center){F.rightLeft+=F.center.width();F.rightLeft+=parseInt(F.center.css("borderLeftWidth"));F.rightLeft+=parseInt(F.center.css("borderRightWidth"));F.rightLeft+=B.space}F.right.css({left:F.rightLeft})}if(F.bottom){F.bottomTop=F.layoutHeight-F.bottom.height()-2;F.bottom.css({top:F.bottomTop})}F.setDropHandlePosition()},start:function(H,G){F.dragtype=H;if(H=="leftresize"||H=="rightresize"){F.xresize={startX:G.pageX};F.draggingyline.css({left:G.pageX-F.layout.offset().left,height:F.middleHeight,top:F.middleTop}).show();A("body").css("cursor","col-resize")}else{if(H=="topresize"||H=="bottomresize"){F.yresize={startY:G.pageY};F.draggingxline.css({top:G.pageY-F.layout.offset().top,width:F.layout.width()}).show();A("body").css("cursor","row-resize")}else{return}}F.layout.lock.width(F.layout.width());F.layout.lock.height(F.layout.height());F.layout.lock.show();if(A.browser.msie||A.browser.safari){A("body").bind("selectstart",function(){return false})}A(document).bind("mouseup",F.stop);A(document).bind("mousemove",F.drag)},drag:function(G){if(F.xresize){F.xresize.diff=G.pageX-F.xresize.startX;F.draggingyline.css({left:G.pageX-F.layout.offset().left});A("body").css("cursor","col-resize")}else{if(F.yresize){F.yresize.diff=G.pageY-F.yresize.startY;F.draggingxline.css({top:G.pageY-F.layout.offset().top});A("body").css("cursor","row-resize")}}},stop:function(G){if(F.xresize&&F.xresize.diff!=undefined){if(F.dragtype=="leftresize"){F.leftWidth+=F.xresize.diff;F.left.width(F.leftWidth);if(F.center){F.center.width(F.center.width()-F.xresize.diff).css({left:parseInt(F.center.css("left"))+F.xresize.diff})}else{if(F.right){F.right.width(F.left.width()-F.xresize.diff).css({left:parseInt(F.right.css("left"))+F.xresize.diff})}}}else{if(F.dragtype=="rightresize"){F.rightWidth-=F.xresize.diff;F.right.width(F.rightWidth).css({left:parseInt(F.right.css("left"))+F.xresize.diff});if(F.center){F.center.width(F.center.width()+F.xresize.diff)}else{if(F.left){F.left.width(F.left.width()+F.xresize.diff)}}}}}else{if(F.yresize&&F.yresize.diff!=undefined){if(F.dragtype=="topresize"){F.top.height(F.top.height()+F.yresize.diff);F.middleTop+=F.yresize.diff;F.middleHeight-=F.yresize.diff;if(F.left){F.left.css({top:F.middleTop}).height(F.middleHeight);F.leftCollapse.css({top:F.middleTop}).height(F.middleHeight)}if(F.center){F.center.css({top:F.middleTop}).height(F.middleHeight)}if(F.right){F.right.css({top:F.middleTop}).height(F.middleHeight);F.rightCollapse.css({top:F.middleTop}).height(F.middleHeight)}}else{if(F.dragtype=="bottomresize"){F.bottom.height(F.bottom.height()-F.yresize.diff);F.middleHeight+=F.yresize.diff;F.bottomTop+=F.yresize.diff;F.bottom.css({top:F.bottomTop});if(F.left){F.left.height(F.middleHeight);F.leftCollapse.height(F.middleHeight)}if(F.center){F.center.height(F.middleHeight)}if(F.right){F.right.height(F.middleHeight);F.rightCollapse.height(F.middleHeight)}}}}}F.setDropHandlePosition();F.draggingxline.hide();F.draggingyline.hide();F.xresize=F.yresize=F.dragtype=false;F.layout.lock.hide();if(A.browser.msie||A.browser.safari){A("body").unbind("selectstart")}A(document).unbind("mousemove",F.drag);A(document).unbind("mouseup",F.stop);A("body").css("cursor","")}};F.layout=A(this);if(!F.layout.hasClass("l-layout")){F.layout.addClass("l-layout")}F.width=F.layout.width();if(A("> div[position=top]",F.layout).length>0){F.top=A("> div[position=top]",F.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent();F.top.content=A("> div[position=top]",F.top);if(!F.top.content.hasClass("l-layout-content")){F.top.content.addClass("l-layout-content")}F.topHeight=B.topHeight;if(F.topHeight){F.top.height(F.topHeight)}}if(A("> div[position=bottom]",F.layout).length>0){F.bottom=A("> div[position=bottom]",F.layout).wrap('<div class="l-layout-bottom"></div>').parent();F.bottom.content=A("> div[position=bottom]",F.top);if(!F.bottom.content.hasClass("l-layout-content")){F.bottom.content.addClass("l-layout-content")}F.bottomHeight=B.bottomHeight;if(F.bottomHeight){F.bottom.height(F.bottomHeight)}}if(A("> div[position=left]",F.layout).length>0){F.left=A("> div[position=left]",F.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent();F.left.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.left.prepend(F.left.header);F.left.header.toggle=A(".l-layout-header-toggle",F.left.header);F.left.content=A("> div[position=left]",F.left);if(!F.left.content.hasClass("l-layout-content")){F.left.content.addClass("l-layout-content")}var D=F.left.content.attr("title");if(D){F.left.content.attr("title","");A(".l-layout-header-inner",F.left.header).html(D)}F.leftWidth=B.leftWidth;if(F.leftWidth){F.left.width(F.leftWidth)}}if(A("> div[position=center]",F.layout).length>0){F.center=A("> div[position=center]",F.layout).wrap('<div class="l-layout-center" ></div>').parent();F.center.content=A("> div[position=center]",F.center);if(!F.center.content.hasClass("l-layout-content")){F.center.content.addClass("l-layout-content")}var E=F.center.content.attr("title");if(E){F.center.content.attr("title","");F.center.header=A('<div class="l-layout-header"></div>');F.center.prepend(F.center.header);F.center.header.html(E)}F.centerWidth=B.centerWidth;if(F.centerWidth){F.center.width(F.centerWidth)}}if(A("> div[position=right]",F.layout).length>0){F.right=A("> div[position=right]",F.layout).wrap('<div class="l-layout-right"></div>').parent();F.right.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.right.prepend(F.right.header);F.right.header.toggle=A(".l-layout-header-toggle",F.right.header);F.right.content=A("> div[position=left]",F.right);if(!F.right.content.hasClass("l-layout-content")){F.right.content.addClass("l-layout-content")}var C=F.right.content.attr("title");if(C){F.right.content.attr("title","");A(".l-layout-header-inner",F.right.header).html(C)}F.rightWidth=B.rightWidth;if(F.rightWidth){F.right.width(F.rightWidth)}}F.layout.lock=A("<div class='l-layout-lock'></div>");F.layout.append(F.layout.lock);F.addDropHandle();F.isLeftCollapse=B.isLeftCollapse;F.isRightCollapse=B.isRightCollapse;F.leftCollapse=A('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>');F.rightCollapse=A('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>');F.layout.append(F.leftCollapse).append(F.rightCollapse);F.leftCollapse.toggle=A("> .l-layout-collapse-left-toggle",F.leftCollapse);F.rightCollapse.toggle=A("> .l-layout-collapse-right-toggle",F.rightCollapse);F.setCollapse();F.init();A(window).resize(function(){F.onResize()});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Layout"]=F;this.usedLayout=true})}})(jQuery);