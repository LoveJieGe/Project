(function(A){A.fn.ligerSpinner=function(B){B=B||{};B=A.extend({type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false},B);if(B.type=="float"){B.step=0.1;B.interval=50}else{if(B.type=="int"){B.step=1;B.interval=100}else{if(B.type=="time"){B.step=1;B.interval=100}}}return this.each(function(){if(this.useSpinner){return}var C={round:function(E,F){var D=1;for(;F>0;D*=10,F--){}for(;F<0;D/=10,F++){}return Math.round(E*D)/D},isInt:function(D){var E=B.isNegative?/^-?\d+$/:/^\d+$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isFloat:function(D){var E=B.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isTime:function(E){var D=E.match(/^(\d{1,2}):(\d{1,2})$/);if(D==null){return false}if(D[1]>24||D[2]>60){return false}return true},isVerify:function(D){if(B.type=="float"){return C.isFloat(D)}else{if(B.type=="int"){return C.isInt(D)}else{if(B.type=="time"){return C.isTime(D)}}}return false},getVerifyValue:function(E){var D=null;if(B.type=="float"){D=C.round(E,B.decimalplace)}else{if(B.type=="int"){D=parseInt(E)}else{if(B.type=="time"){D=E}}}if(!C.isVerify(D)){return C.value}else{return D}},getDefaultValue:function(){if(B.type=="float"||B.type=="int"){return 0}else{if(B.type=="time"){return"00:00"}}},addValue:function(E){var D=C.inputText.val();D=parseFloat(D)+E;C.inputText.val(D);C.inputText.trigger("change")},addTime:function(F){var D=C.inputText.val();var E=D.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(E[2])+F;if(newminute<10){newminute="0"+newminute}D=E[1]+":"+newminute;C.inputText.val(D);C.inputText.trigger("change")},uping:function(){if(B.type=="float"||B.type=="int"){C.addValue(B.step)}else{if(B.type=="time"){C.addTime(B.step)}}},downing:function(){if(B.type=="float"||B.type=="int"){C.addValue(-1*B.step)}else{if(B.type=="time"){C.addTime(-1*B.step)}}},isDateTime:function(E){var D=E.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(D==null){return false}var F=new Date(D[1],D[3]-1,D[4]);if(F=="NaN"){return false}return(F.getFullYear()==D[1]&&(F.getMonth()+1)==D[3]&&F.getDate()==D[4])},isLongDateTime:function(F){var E=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var D=F.match(E);if(D==null){return false}var G=new Date(D[1],D[3]-1,D[4],D[5],D[6]);if(G=="NaN"){return false}return(G.getFullYear()==D[1]&&(G.getMonth()+1)==D[3]&&G.getDate()==D[4]&&G.getHours()==D[5]&&G.getMinutes()==D[6])},interval:null,inputText:null,value:null,textFieldID:""};if(this.tagName.toLowerCase()=="input"&&this.type&&this.type=="text"){C.inputText=A(this);if(this.id){C.textFieldID=this.id}}else{C.inputText=A('<input type="text"/>');C.inputText.appendTo(A(this))}if(C.textFieldID==""&&B.textFieldID){C.textFieldID=B.textFieldID}C.link=A('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>');C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();C.wrapper.append(C.link).after(C.selectBox).after(C.valueField);C.link.up=A(".l-spinner-up",C.link);C.link.down=A(".l-spinner-down",C.link);if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-20})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2);C.link.height(B.height-4)}if(!C.isVerify(C.inputText.val())){C.value=C.getDefaultValue();C.inputText.val(C.value)}C.link.up.hover(function(){A(this).addClass("l-spinner-up-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-up-over")}).mousedown(function(){C.interval=setInterval(C.uping,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.link.down.hover(function(){A(this).addClass("l-spinner-down-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-down-over")}).mousedown(function(){C.interval=setInterval(C.downing,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.inputText.change(function(){var D=C.inputText.val();C.value=C.getVerifyValue(D);if(B.onChangeValue){B.onChangeValue(C.value)}C.inputText.val(C.value)});this.useSpinner=true})}})(jQuery);