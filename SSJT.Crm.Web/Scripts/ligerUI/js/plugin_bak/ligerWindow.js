(function(A){A.fn.ligerApplyWindow=function(B){return this.each(function(){B=A.extend({showClose:true,showMax:true,showToggle:true},B||{});var C={};C.window=A('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>');C.window.content=A(".l-window-content",C.window);C.window.header=A(".l-window-header",C.window);A(this).appendTo(C.window.content);A.ligerWindow.switchWindow(C.window[0]);A("body").append(C.window);B.left&&C.window.css("left",B.left);B.right&&C.window.css("right",B.right);B.top&&C.window.css("top",B.top);B.bottom&&C.window.css("bottom",B.bottom);B.width&&C.window.width(B.width);B.height&&C.window.content.height(B.height-28);B.title&&A(".l-window-header-inner",C.window.header).html(B.title);B.framename&&A(">iframe",C.window.content).attr("name",B.framename);if(!B.showToggle){A(".l-window-toggle",C.window).remove()}if(!B.showMax){A(".l-window-max",C.window).remove()}if(!B.showClose){A(".l-window-close",C.window).remove()}if(A.fn.ligerDrag){C.window.ligerDrag({handler:".l-window-header",onStartDrag:function(){A.ligerWindow.switchWindow(C.window[0]);C.window.addClass("l-window-dragging");C.window.content.children().hide()},onStopDrag:function(){C.window.removeClass("l-window-dragging");C.window.content.children().show()}})}if(A.fn.ligerResizable){C.window.ligerResizable({onStartResize:function(){A.ligerWindow.switchWindow(C.window[0]);if(A(".l-window-max",C.window).hasClass("l-window-regain")){A(".l-window-max",C.window).removeClass("l-window-regain")}},onStopResize:function(D,G){var E=0;var F=0;if(!isNaN(parseInt(C.window.css("top")))){E=parseInt(C.window.css("top"))}if(!isNaN(parseInt(C.window.css("left")))){F=parseInt(C.window.css("left"))}if(D.diffTop!=undefined){C.window.css({top:E+D.diffTop,left:F+D.diffLeft,width:D.newWidth});C.window.content.height(D.newHeight-28)}return false}});C.window.append("<div class='l-btn-nw-drop'></div>")}A(".l-window-toggle",C.window).click(function(){if(A(this).hasClass("l-window-toggle-close")){A(this).removeClass("l-window-toggle-close")}else{A(this).addClass("l-window-toggle-close")}C.window.content.slideToggle()});A(".l-window-close",C.window).click(function(){if(B.onClose&&B.onClose()==false){return false}C.window.hide()});A(".l-window-max",C.window).click(function(){if(A(this).hasClass("l-window-regain")){if(B.onRegain&&B.onRegain()==false){return false}C.window.width(C.lastWindowWidth).css({left:C.lastWindowLeft,top:C.lastWindowTop});C.window.content.height(C.lastWindowHeight-28);A(this).removeClass("l-window-regain")}else{if(B.onMax&&B.onMax()==false){return false}C.lastWindowWidth=C.window.width();C.lastWindowHeight=C.window.height();C.lastWindowLeft=C.window.css("left");C.lastWindowTop=C.window.css("top");C.window.width(A(window).width()-2).css({left:0,top:0});C.window.content.height(A(window).height()-28);A(this).addClass("l-window-regain")}})})};A.ligerWindow={};A.ligerWindow.switchWindow=function(B){A(B).css("z-index","101").siblings(".l-window").css("z-index","100")};A.ligerWindow.show=function(E){E=E||{};if(E.url){var C=A("<iframe frameborder='0' src='"+E.url+"'></iframe>");var D="window"+new Date().getTime();if(E.name){D=E.name}C.attr("name",D);E.framename=D;C.ligerApplyWindow(A.extend({},E))}else{if(E.content){var B=A("<div>"+E.content+"</div>");B.ligerApplyWindow(A.extend({},E))}else{if(E.target){E.target.ligerApplyWindow(A.extend({},E))}}}}})(jQuery);